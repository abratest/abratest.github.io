(window.webpackJsonp=window.webpackJsonp||[]).push([[103],{1042:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){((0,o.default)(e)?v:_)(e,(0,m.default)(t),n)};var o=y(n(544)),r=y(n(1048)),c=y(n(2010)),l=y(n(1051)),d=y(n(464)),f=y(n(714)),h=y(n(716)),m=y(n(313));function y(e){return e&&e.__esModule?e:{default:e}}function v(e,t,n){n=(0,f.default)(n||d.default);var o=0,c=0,l=e.length;function m(e,t){e?n(e):++c!==l&&t!==r.default||n(null)}for(0===l&&n(null);o<l;o++)t(e[o],o,(0,h.default)(m))}var _=(0,l.default)(c.default,1/0);e.exports=t.default},1048:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={},e.exports=t.default},1049:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(t,n,f){if(f=(0,r.default)(f||o.default),e<=0||!t)return f(null);var h=(0,c.default)(t),m=!1,y=0,v=!1;function _(e,t){if(y-=1,e)m=!0,f(e);else{if(t===d.default||m&&y<=0)return m=!0,f(null);v||k()}}function k(){for(v=!0;y<e&&!m;){var t=h();if(null===t)return m=!0,void(y<=0&&f(null));y+=1,n(t.value,t.key,(0,l.default)(_))}v=!1}k()}};var o=f(n(464)),r=f(n(714)),c=f(n(2011)),l=f(n(716)),d=f(n(1048));function f(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},1051:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return function(n,o,r){return e(n,t,o,r)}},e.exports=t.default},1052:function(e,t,n){const o=n(1053);function r(e){return"never"!==d(e)}function c(e){var t=l(e);return t>=e.params.length?e.params:"eth_getBlockByNumber"===e.method?e.params.slice(1):e.params.slice(0,t)}function l(e){switch(e.method){case"eth_getStorageAt":return 2;case"eth_getBalance":case"eth_getCode":case"eth_getTransactionCount":case"eth_call":case"eth_estimateGas":return 1;case"eth_getBlockByNumber":return 0;default:return}}function d(e){switch(e.method){case"web3_clientVersion":case"web3_sha3":case"eth_protocolVersion":case"eth_getBlockTransactionCountByHash":case"eth_getUncleCountByBlockHash":case"eth_getCode":case"eth_getBlockByHash":case"eth_getTransactionByHash":case"eth_getTransactionByBlockHashAndIndex":case"eth_getTransactionReceipt":case"eth_getUncleByBlockHashAndIndex":case"eth_getCompilers":case"eth_compileLLL":case"eth_compileSolidity":case"eth_compileSerpent":case"shh_version":return"perma";case"eth_getBlockByNumber":case"eth_getBlockTransactionCountByNumber":case"eth_getUncleCountByBlockNumber":case"eth_getTransactionByBlockNumberAndIndex":case"eth_getUncleByBlockNumberAndIndex":return"fork";case"eth_gasPrice":case"eth_getBalance":case"eth_getStorageAt":case"eth_getTransactionCount":case"eth_call":case"eth_estimateGas":case"eth_getFilterLogs":case"eth_getLogs":case"eth_blockNumber":return"block";case"net_version":case"net_peerCount":case"net_listening":case"eth_syncing":case"eth_sign":case"eth_coinbase":case"eth_mining":case"eth_hashrate":case"eth_accounts":case"eth_sendTransaction":case"eth_sendRawTransaction":case"eth_newFilter":case"eth_newBlockFilter":case"eth_newPendingTransactionFilter":case"eth_uninstallFilter":case"eth_getFilterChanges":case"eth_getWork":case"eth_submitWork":case"eth_submitHashrate":case"db_putString":case"db_getString":case"db_putHex":case"db_getHex":case"shh_post":case"shh_newIdentity":case"shh_hasIdentity":case"shh_newGroup":case"shh_addToGroup":case"shh_newFilter":case"shh_uninstallFilter":case"shh_getFilterChanges":case"shh_getMessages":return"never"}}e.exports={cacheIdentifierForPayload:function(e,t={}){if(!r(e))return null;const{includeBlockRef:n}=t,l=n?e.params:c(e);return e.method+":"+o(l)},canCache:r,blockTagForPayload:function(e){var t=l(e);if(t>=e.params.length)return null;return e.params[t]},paramsWithoutBlockTag:c,blockTagParamIndex:l,cacheTypeForPayload:d}},1994:function(e,t,n){const o=n(96).EventEmitter,r=n(104).inherits,c=n(157),l=n(601),map=n(2005),d=n(2033),f=n(2036),h=(n(1052),n(717)),m=function(){};function y(e){o.call(this),this.setMaxListeners(30),e=e||{};const t={sendAsync:this._handleAsync.bind(this)},n=e.blockTrackerProvider||t;this._blockTracker=e.blockTracker||new l({provider:n,pollingInterval:e.pollingInterval||4e3,setSkipCacheFlag:!0}),this._ready=new f,this.currentBlock=null,this._providers=[]}e.exports=y,r(y,o),y.prototype.start=function(e=m){const t=this;t._ready.go(),t._blockTracker.on("latest",e=>{t._getBlockByNumberWithRetry(e,(e,n)=>{if(e)return void this.emit("error",e);if(!n)return console.log(n),void this.emit("error",new Error("Could not find block"));const o=(r=n,{number:c.toBuffer(r.number),hash:c.toBuffer(r.hash),parentHash:c.toBuffer(r.parentHash),nonce:c.toBuffer(r.nonce),mixHash:c.toBuffer(r.mixHash),sha3Uncles:c.toBuffer(r.sha3Uncles),logsBloom:c.toBuffer(r.logsBloom),transactionsRoot:c.toBuffer(r.transactionsRoot),stateRoot:c.toBuffer(r.stateRoot),receiptsRoot:c.toBuffer(r.receiptRoot||r.receiptsRoot),miner:c.toBuffer(r.miner),difficulty:c.toBuffer(r.difficulty),totalDifficulty:c.toBuffer(r.totalDifficulty),size:c.toBuffer(r.size),extraData:c.toBuffer(r.extraData),gasLimit:c.toBuffer(r.gasLimit),gasUsed:c.toBuffer(r.gasUsed),timestamp:c.toBuffer(r.timestamp),transactions:r.transactions});var r;t._setCurrentBlock(o),t.emit("rawBlock",n),t.emit("latest",n)})}),t._blockTracker.on("sync",t.emit.bind(t,"sync")),t._blockTracker.on("error",t.emit.bind(t,"error")),t._running=!0,t.emit("start")},y.prototype.stop=function(){this._blockTracker.removeAllListeners(),this._running=!1,this.emit("stop")},y.prototype.isRunning=function(){return this._running},y.prototype.addProvider=function(source,e){const t=this;"number"==typeof e?t._providers.splice(e,0,source):t._providers.push(source),source.setEngine(this)},y.prototype.removeProvider=function(source){const e=this._providers.indexOf(source);if(e<0)throw new Error("Provider not found.");this._providers.splice(e,1)},y.prototype.send=function(e){throw new Error("Web3ProviderEngine does not support synchronous requests.")},y.prototype.sendAsync=function(e,t){const n=this;n._ready.await((function(){Array.isArray(e)?map(e,n._handleAsync.bind(n),t):n._handleAsync(e,t)}))},y.prototype._getBlockByNumberWithRetry=function(e,t){const n=this;let o=5;return void r();function r(){n._getBlockByNumber(e,c)}function c(e,n){return e?t(e):n?void t(null,n):o>0?(o--,void setTimeout((function(){r()}),1e3)):void t(null,null)}},y.prototype._getBlockByNumber=function(e,t){const n=h({method:"eth_getBlockByNumber",params:[e,!1],skipCache:!0});this._handleAsync(n,(e,n)=>e?t(e):t(null,n.result))},y.prototype._handleAsync=function(e,t){var n=this,o=-1,r=null,c=null,l=[];function f(n,o){c=n,r=o,d(l,(function(e,t){e?e(c,r,t):t()}),(function(){var n={id:e.id,jsonrpc:e.jsonrpc,result:r};null!=c?(n.error={message:c.stack||c.message||c,code:-32e3},t(c,n)):t(null,n)}))}!function t(r){if(o+=1,l.unshift(r),o>=n._providers.length)f(new Error('Request for method "'+e.method+'" not handled by any subprovider. Please check your subprovider configuration to ensure this method is handled.'));else try{n._providers[o].handleRequest(e,t,f)}catch(e){f(e)}}()},y.prototype._setCurrentBlock=function(e){this.currentBlock=e,this.emit("block",e)}},2005:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=c(n(2006)),r=c(n(2032));function c(e){return e&&e.__esModule?e:{default:e}}t.default=(0,o.default)(r.default),e.exports=t.default},2006:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(t,n,c){return e(o.default,t,(0,r.default)(n),c)}};var o=c(n(1042)),r=c(n(313));function c(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},2010:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,c){(0,o.default)(t)(e,(0,r.default)(n),c)};var o=c(n(1049)),r=c(n(313));function c(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},2011:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if((0,o.default)(e))return function(e){var i=-1,t=e.length;return function(){return++i<t?{value:e[i],key:i}:null}}(e);var t=(0,r.default)(e);return t?function(e){var i=-1;return function(){var t=e.next();return t.done?null:(i++,{value:t.value,key:i})}}(t):(n=e,l=(0,c.default)(n),i=-1,d=l.length,function(){var e=l[++i];return i<d?{value:n[e],key:e}:null});var n,l,i,d};var o=l(n(544)),r=l(n(2012)),c=l(n(2013));function l(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},2012:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return o&&e[o]&&e[o]()};var o="function"==typeof Symbol&&Symbol.iterator;e.exports=t.default},2029:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,r.default)((function(t,n){var r;try{r=e.apply(this,t)}catch(e){return n(e)}(0,o.default)(r)&&"function"==typeof r.then?r.then((function(e){d(n,null,e)}),(function(e){d(n,e.message?e:new Error(e))})):n(null,r)}))};var o=l(n(1046)),r=l(n(2030)),c=l(n(2031));function l(e){return e&&e.__esModule?e:{default:e}}function d(e,t,n){try{e(t,n)}catch(e){(0,c.default)(f,e)}}function f(e){throw e}e.exports=t.default},2030:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(){var t=(0,c.default)(arguments),n=t.pop();e.call(this,t,n)}};var o,r=n(545),c=(o=r)&&o.__esModule?o:{default:o};e.exports=t.default},2031:function(e,t,n){"use strict";(function(e,o){Object.defineProperty(t,"__esModule",{value:!0}),t.hasNextTick=t.hasSetImmediate=void 0,t.fallback=m,t.wrap=y;var r,c=n(545),l=(r=c)&&r.__esModule?r:{default:r};var d,f=t.hasSetImmediate="function"==typeof e&&e,h=t.hasNextTick="object"==typeof o&&"function"==typeof o.nextTick;function m(e){setTimeout(e,0)}function y(e){return function(t){var n=(0,l.default)(arguments,1);e((function(){t.apply(null,n)}))}}d=f?e:h?o.nextTick:m,t.default=y(d)}).call(this,n(306).setImmediate,n(30))},2032:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,c){c=c||o.default,t=t||[];var l=[],d=0,f=(0,r.default)(n);e(t,(function(e,t,n){var o=d++;f(e,(function(e,t){l[o]=t,n(e)}))}),(function(e){c(e,l)}))};var o=c(n(464)),r=c(n(313));function c(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},2033:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=c(n(2034)),r=c(n(1051));function c(e){return e&&e.__esModule?e:{default:e}}t.default=(0,r.default)(o.default,1),e.exports=t.default},2034:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,l){(0,o.default)(t)(e,(0,r.default)((0,c.default)(n)),l)};var o=l(n(1049)),r=l(n(2035)),c=l(n(313));function l(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},2035:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(t,n,o){return e(t,o)}},e.exports=t.default},2036:function(e,t,n){const o=n(96).EventEmitter,r=n(104).inherits;function c(){o.call(this),this.isLocked=!0}e.exports=c,r(c,o),c.prototype.go=function(){this.isLocked=!1,this.emit("unlock")},c.prototype.stop=function(){this.isLocked=!0,this.emit("lock")},c.prototype.await=function(e){const t=this;t.isLocked?t.once("unlock",e):setTimeout(e)}},2040:function(e,t){e.exports=function(){return Math.floor(Number.MAX_SAFE_INTEGER*Math.random())}},2041:function(e,t,n){const o=n(718),r=n(775);e.exports=class extends o{constructor(e){super(({blockTracker:t})=>r(Object.assign({blockTracker:t},e)))}}},2042:function(e,t,n){const o=n(104).inherits,r=n(546);function c(e){e=e||{},this.staticResponses=e}e.exports=c,o(c,r),c.prototype.handleRequest=function(e,t,n){var o=this.staticResponses[e.method];"function"==typeof o?o(e,t,n):void 0!==o?setTimeout(()=>n(null,o)):t()}},2043:function(e,t,n){const o=n(718),r=n(602);e.exports=class extends o{constructor(){super(({blockTracker:e,provider:t,engine:n})=>r({blockTracker:e,provider:t}))}}},2056:function(e,t,n){const o=n(2057),r=n(2058),c=n(104).inherits,l=n(157),d=n(2060),f=n(254),h=n(2071),m=n(546),y=n(2072),v=/^[0-9A-Fa-f]+$/g;function _(e){this.nonceLock=h(1),e.getAccounts&&(this.getAccounts=e.getAccounts),e.processTransaction&&(this.processTransaction=e.processTransaction),e.processMessage&&(this.processMessage=e.processMessage),e.processPersonalMessage&&(this.processPersonalMessage=e.processPersonalMessage),e.processTypedMessage&&(this.processTypedMessage=e.processTypedMessage),this.approveTransaction=e.approveTransaction||this.autoApprove,this.approveMessage=e.approveMessage||this.autoApprove,this.approvePersonalMessage=e.approvePersonalMessage||this.autoApprove,this.approveDecryptMessage=e.approveDecryptMessage||this.autoApprove,this.approveEncryptionPublicKey=e.approveEncryptionPublicKey||this.autoApprove,this.approveTypedMessage=e.approveTypedMessage||this.autoApprove,e.signTransaction&&(this.signTransaction=e.signTransaction||C("signTransaction")),e.signMessage&&(this.signMessage=e.signMessage||C("signMessage")),e.signPersonalMessage&&(this.signPersonalMessage=e.signPersonalMessage||C("signPersonalMessage")),e.decryptMessage&&(this.decryptMessage=e.decryptMessage||C("decryptMessage")),e.encryptionPublicKey&&(this.encryptionPublicKey=e.encryptionPublicKey||C("encryptionPublicKey")),e.signTypedMessage&&(this.signTypedMessage=e.signTypedMessage||C("signTypedMessage")),e.recoverPersonalSignature&&(this.recoverPersonalSignature=e.recoverPersonalSignature),e.publishTransaction&&(this.publishTransaction=e.publishTransaction),this.estimateGas=e.estimateGas||this.estimateGas,this.getGasPrice=e.getGasPrice||this.getGasPrice}function k(e){return e.toLowerCase()}function T(e){const t=l.addHexPrefix(e);return l.isValidAddress(t)}function w(e){const t=l.addHexPrefix(e);return!l.isValidAddress(t)&&M(e)}function M(data){if(!("string"==typeof data))return!1;if(!("0x"===data.slice(0,2)))return!1;return data.slice(2).match(v)}function C(e){return function(t,n){n(new Error('ProviderEngine - HookedWalletSubprovider - Must provide "'+e+'" fn in constructor options'))}}e.exports=_,c(_,m),_.prototype.handleRequest=function(e,t,n){const r=this;let c,l,d,h,address;switch(r._parityRequests={},r._parityRequestCount=0,e.method){case"eth_coinbase":return void r.getAccounts((function(e,t){if(e)return n(e);let o=t[0]||null;n(null,o)}));case"eth_accounts":return void r.getAccounts((function(e,t){if(e)return n(e);n(null,t)}));case"eth_sendTransaction":return c=e.params[0],void o([e=>r.validateTransaction(c,e),e=>r.processTransaction(c,e)],n);case"eth_signTransaction":return c=e.params[0],void o([e=>r.validateTransaction(c,e),e=>r.processSignTransaction(c,e)],n);case"eth_sign":return address=e.params[0],h=e.params[1],d=e.params[2]||{},l=f(d,{from:address,data:h}),void o([e=>r.validateMessage(l,e),e=>r.processMessage(l,e)],n);case"personal_sign":return function(){const t=e.params[0];if(w(e.params[1])&&T(t)){let t="The eth_personalSign method requires params ordered ";t+="[message, address]. This was previously handled incorrectly, ",t+="and has been corrected automatically. ",t+="Please switch this param order for smooth behavior in the future.",console.warn(t),address=e.params[0],h=e.params[1]}else h=e.params[0],address=e.params[1];d=e.params[2]||{},l=f(d,{from:address,data:h}),o([e=>r.validatePersonalMessage(l,e),e=>r.processPersonalMessage(l,e)],n)}();case"eth_decryptMessage":return function(){const t=e.params[0];if(w(e.params[1])&&T(t)){let t="The eth_decryptMessage method requires params ordered ";t+="[message, address]. This was previously handled incorrectly, ",t+="and has been corrected automatically. ",t+="Please switch this param order for smooth behavior in the future.",console.warn(t),address=e.params[0],h=e.params[1]}else h=e.params[0],address=e.params[1];d=e.params[2]||{},l=f(d,{from:address,data:h}),o([e=>r.validateDecryptMessage(l,e),e=>r.processDecryptMessage(l,e)],n)}();case"encryption_public_key":return function(){const address=e.params[0];o([e=>r.validateEncryptionPublicKey(address,e),e=>r.processEncryptionPublicKey(address,e)],n)}();case"personal_ecRecover":return function(){h=e.params[0];let t=e.params[1];d=e.params[2]||{},l=f(d,{sig:t,data:h}),r.recoverPersonalSignature(l,n)}();case"eth_signTypedData":case"eth_signTypedData_v3":case"eth_signTypedData_v4":return function(){const t=e.params[0],c=e.params[1];T(t)?(address=t,h=c):(h=t,address=c),d=e.params[2]||{},l=f(d,{from:address,data:h}),o([e=>r.validateTypedMessage(l,e),e=>r.processTypedMessage(l,e)],n)}();case"parity_postTransaction":return c=e.params[0],void r.parityPostTransaction(c,n);case"parity_postSign":return address=e.params[0],h=e.params[1],void r.parityPostSign(address,h,n);case"parity_checkRequest":return function(){const t=e.params[0];r.parityCheckRequest(t,n)}();case"parity_defaultAccount":return void r.getAccounts((function(e,t){if(e)return n(e);const o=t[0]||null;n(null,o)}));default:return void t()}},_.prototype.getAccounts=function(e){e(null,[])},_.prototype.processTransaction=function(e,t){const n=this;o([t=>n.approveTransaction(e,t),(e,t)=>n.checkApproval("transaction",e,t),t=>n.finalizeAndSubmitTx(e,t)],t)},_.prototype.processSignTransaction=function(e,t){const n=this;o([t=>n.approveTransaction(e,t),(e,t)=>n.checkApproval("transaction",e,t),t=>n.finalizeTx(e,t)],t)},_.prototype.processMessage=function(e,t){const n=this;o([t=>n.approveMessage(e,t),(e,t)=>n.checkApproval("message",e,t),t=>n.signMessage(e,t)],t)},_.prototype.processPersonalMessage=function(e,t){const n=this;o([t=>n.approvePersonalMessage(e,t),(e,t)=>n.checkApproval("message",e,t),t=>n.signPersonalMessage(e,t)],t)},_.prototype.processDecryptMessage=function(e,t){const n=this;o([t=>n.approveDecryptMessage(e,t),(e,t)=>n.checkApproval("decryptMessage",e,t),t=>n.decryptMessage(e,t)],t)},_.prototype.processEncryptionPublicKey=function(e,t){const n=this;o([t=>n.approveEncryptionPublicKey(e,t),(e,t)=>n.checkApproval("encryptionPublicKey",e,t),t=>n.encryptionPublicKey(e,t)],t)},_.prototype.processTypedMessage=function(e,t){const n=this;o([t=>n.approveTypedMessage(e,t),(e,t)=>n.checkApproval("message",e,t),t=>n.signTypedMessage(e,t)],t)},_.prototype.autoApprove=function(e,t){t(null,!0)},_.prototype.checkApproval=function(e,t,n){n(t?null:new Error("User denied "+e+" signature."))},_.prototype.parityPostTransaction=function(e,t){const n=this,o="0x"+n._parityRequestCount.toString(16);n._parityRequestCount++,n.emitPayload({method:"eth_sendTransaction",params:[e]},(function(e,t){if(e)return void(n._parityRequests[o]={error:e});const r=t.result;n._parityRequests[o]=r})),t(null,o)},_.prototype.parityPostSign=function(address,e,t){const n=this,o="0x"+n._parityRequestCount.toString(16);n._parityRequestCount++,n.emitPayload({method:"eth_sign",params:[address,e]},(function(e,t){if(e)return void(n._parityRequests[o]={error:e});const r=t.result;n._parityRequests[o]=r})),t(null,o)},_.prototype.parityCheckRequest=function(e,t){const n=this._parityRequests[e]||null;return n?n.error?t(n.error):void t(null,n):t(null,null)},_.prototype.recoverPersonalSignature=function(e,t){let n;try{n=d.recoverPersonalSignature(e)}catch(e){return t(e)}t(null,n)},_.prototype.validateTransaction=function(e,t){if(void 0===e.from)return t(new Error("Undefined address - from address required to sign transaction."));this.validateSender(e.from,(function(n,o){return n?t(n):o?void t():t(new Error(`Unknown address - unable to sign transaction for this address: "${e.from}"`))}))},_.prototype.validateMessage=function(e,t){if(void 0===e.from)return t(new Error("Undefined address - from address required to sign message."));this.validateSender(e.from,(function(n,o){return n?t(n):o?void t():t(new Error(`Unknown address - unable to sign message for this address: "${e.from}"`))}))},_.prototype.validatePersonalMessage=function(e,t){return void 0===e.from?t(new Error("Undefined address - from address required to sign personal message.")):void 0===e.data?t(new Error("Undefined message - message required to sign personal message.")):M(e.data)?void this.validateSender(e.from,(function(n,o){return n?t(n):o?void t():t(new Error(`Unknown address - unable to sign message for this address: "${e.from}"`))})):t(new Error("HookedWalletSubprovider - validateMessage - message was not encoded as hex."))},_.prototype.validateDecryptMessage=function(e,t){return void 0===e.from?t(new Error("Undefined address - from address required to decrypt message.")):void 0===e.data?t(new Error("Undefined message - message required to decrypt message.")):M(e.data)?void this.validateSender(e.from,(function(n,o){return n?t(n):o?void t():t(new Error(`Unknown address - unable to decrypt message for this address: "${e.from}"`))})):t(new Error("HookedWalletSubprovider - validateDecryptMessage - message was not encoded as hex."))},_.prototype.validateEncryptionPublicKey=function(address,e){this.validateSender(address,(function(t,n){return t?e(t):n?void e():e(new Error(`Unknown address - unable to obtain encryption public key for this address: "${address}"`))}))},_.prototype.validateTypedMessage=function(e,t){return void 0===e.from?t(new Error("Undefined address - from address required to sign typed data.")):void 0===e.data?t(new Error("Undefined data - message required to sign typed data.")):void this.validateSender(e.from,(function(n,o){return n?t(n):o?void t():t(new Error(`Unknown address - unable to sign message for this address: "${e.from}"`))}))},_.prototype.validateSender=function(e,t){if(!e)return t(null,!1);this.getAccounts((function(n,o){if(n)return t(n);const r=-1!==o.map(k).indexOf(e.toLowerCase());t(null,r)}))},_.prototype.finalizeAndSubmitTx=function(e,t){const n=this;n.nonceLock.take((function(){o([n.fillInTxExtras.bind(n,e),n.signTransaction.bind(n),n.publishTransaction.bind(n)],(function(e,o){if(n.nonceLock.leave(),e)return t(e);t(null,o)}))}))},_.prototype.finalizeTx=function(e,t){const n=this;n.nonceLock.take((function(){o([n.fillInTxExtras.bind(n,e),n.signTransaction.bind(n)],(function(o,r){if(n.nonceLock.leave(),o)return t(o);t(null,{raw:r,tx:e})}))}))},_.prototype.publishTransaction=function(e,t){this.emitPayload({method:"eth_sendRawTransaction",params:[e]},(function(e,n){if(e)return t(e);t(null,n.result)}))},_.prototype.estimateGas=function(e,t){y(this.engine,e,t)},_.prototype.getGasPrice=function(e){this.emitPayload({method:"eth_gasPrice",params:[]},(function(t,n){if(t)return e(t);e(null,n.result)}))},_.prototype.fillInTxExtras=function(e,t){const n=this,address=e.from,o={};void 0===e.gasPrice&&(o.gasPrice=n.getGasPrice.bind(n)),void 0===e.nonce&&(o.nonce=n.emitPayload.bind(n,{method:"eth_getTransactionCount",params:[address,"pending"]})),void 0===e.gas&&(o.gas=n.estimateGas.bind(n,function(e){return{from:e.from,to:e.to,value:e.value,data:e.data,gas:e.gas,gasPrice:e.gasPrice,nonce:e.nonce}}(e))),r(o,(function(n,o){if(n)return t(n);const r={};o.gasPrice&&(r.gasPrice=o.gasPrice),o.nonce&&(r.nonce=o.nonce.result),o.gas&&(r.gas=o.gas),t(null,f(e,r))}))}},2057:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(t=(0,c.default)(t||r.default),!(0,o.default)(e))return t(new Error("First argument to waterfall must be an array of functions"));if(!e.length)return t();var n=0;function h(t){var o=(0,f.default)(e[n++]);t.push((0,d.default)(m)),o.apply(null,t)}function m(o){if(o||n===e.length)return t.apply(null,arguments);h((0,l.default)(arguments,1))}h([])};var o=h(n(1050)),r=h(n(464)),c=h(n(714)),l=h(n(545)),d=h(n(716)),f=h(n(313));function h(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},2058:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){(0,r.default)(o.default,e,t)};var o=c(n(1042)),r=c(n(2059));function c(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},2059:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){n=n||o.default;var d=(0,r.default)(t)?[]:{};e(t,(function(e,t,n){(0,l.default)(e)((function(e,o){arguments.length>2&&(o=(0,c.default)(arguments,1)),d[t]=o,n(e)}))}),(function(e){n(e,d)}))};var o=d(n(464)),r=d(n(544)),c=d(n(545)),l=d(n(313));function d(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},2072:function(e,t,n){const o=n(717);e.exports=function(e,t,n){e.sendAsync(o({method:"eth_estimateGas",params:[t]}),(function(e,t){if(e)return"no contract code at given address"===e.message?n(null,"0xcf08"):n(e);n(null,t.result)}))}},2073:function(e,t,n){(function(t){const o=n(104).inherits,r=n(2074),c=n(157),l=n(546),d=n(1052).blockTagForPayload;function f(e){this.nonceCache={}}e.exports=f,o(f,l),f.prototype.handleRequest=function(e,n,o){const l=this;switch(e.method){case"eth_getTransactionCount":var f=d(e),address=e.params[0].toLowerCase(),h=l.nonceCache[address];return void("pending"===f?h?o(null,h):n((function(e,t,n){if(e)return n();void 0===l.nonceCache[address]&&(l.nonceCache[address]=t),n()})):n());case"eth_sendRawTransaction":return void n((function(n,o,d){if(n)return d();var f=e.params[0],h=(c.stripHexPrefix(f),t.from(c.stripHexPrefix(f),"hex"),new r(t.from(c.stripHexPrefix(f),"hex"))),address="0x"+h.getSenderAddress().toString("hex").toLowerCase(),m=c.bufferToInt(h.nonce),y=(++m).toString(16);y.length%2&&(y="0"+y),y="0x"+y,l.nonceCache[address]=y,d()}));case"evm_revert":return l.nonceCache={},void n();default:return void n()}}}).call(this,n(6).Buffer)},2076:function(e,t,n){const o=n(718),r=n(603);e.exports=class extends o{constructor(){super(({blockTracker:e,provider:t,engine:n})=>{const{events:o,middleware:c}=r({blockTracker:e,provider:t});return o.on("notification",data=>n.emit("data",null,data)),c})}}},2188:function(e,t,n){"use strict";var o=n(113),r=n(2189),c=n(114).errors,l=n(366).w3cwebsocket,d=function(e,t){o.call(this),t=t||{},this.url=e,this._customTimeout=t.timeout||15e3,this.headers=t.headers||{},this.protocol=t.protocol||void 0,this.reconnectOptions=Object.assign({auto:!1,delay:5e3,maxAttempts:!1,onTimeout:!1},t.reconnect),this.clientConfig=t.clientConfig||void 0,this.requestOptions=t.requestOptions||void 0,this.DATA="data",this.CLOSE="close",this.ERROR="error",this.CONNECT="connect",this.RECONNECT="reconnect",this.connection=null,this.requestQueue=new Map,this.responseQueue=new Map,this.reconnectAttempts=0,this.reconnecting=!1;var n=r.parseURL(e);n.username&&n.password&&(this.headers.authorization="Basic "+r.btoa(n.username+":"+n.password)),n.auth&&(this.headers.authorization="Basic "+r.btoa(n.auth)),Object.defineProperty(this,"connected",{get:function(){return this.connection&&this.connection.readyState===this.connection.OPEN},enumerable:!0}),this.connect()};(d.prototype=Object.create(o.prototype)).constructor=d,d.prototype.connect=function(){this.connection=new l(this.url,this.protocol,void 0,this.headers,this.requestOptions,this.clientConfig),this._addSocketListeners()},d.prototype._onMessage=function(e){var t=this;this._parseResponse("string"==typeof e.data?e.data:"").forEach((function(e){if(e.method&&-1!==e.method.indexOf("_subscription"))t.emit(t.DATA,e);else{var n=e.id;Array.isArray(e)&&(n=e[0].id),t.responseQueue.has(n)&&(void 0!==t.responseQueue.get(n).callback&&t.responseQueue.get(n).callback(!1,e),t.responseQueue.delete(n))}}))},d.prototype._onConnect=function(){if(this.emit(this.CONNECT),this.reconnectAttempts=0,this.reconnecting=!1,this.requestQueue.size>0){var e=this;this.requestQueue.forEach((function(t,n){e.send(t.payload,t.callback),e.requestQueue.delete(n)}))}},d.prototype._onClose=function(e){var t=this;!this.reconnectOptions.auto||[1e3,1001].includes(e.code)&&!1!==e.wasClean?(this.emit(this.CLOSE,e),this.requestQueue.size>0&&this.requestQueue.forEach((function(n,o){n.callback(c.ConnectionNotOpenError(e)),t.requestQueue.delete(o)})),this.responseQueue.size>0&&this.responseQueue.forEach((function(n,o){n.callback(c.InvalidConnection("on WS",e)),t.responseQueue.delete(o)})),this._removeSocketListeners(),this.removeAllListeners()):this.reconnect()},d.prototype._addSocketListeners=function(){this.connection.addEventListener("message",this._onMessage.bind(this)),this.connection.addEventListener("open",this._onConnect.bind(this)),this.connection.addEventListener("close",this._onClose.bind(this))},d.prototype._removeSocketListeners=function(){this.connection.removeEventListener("message",this._onMessage),this.connection.removeEventListener("open",this._onConnect),this.connection.removeEventListener("close",this._onClose)},d.prototype._parseResponse=function(data){var e=this,t=[];return data.replace(/\}[\n\r]?\{/g,"}|--|{").replace(/\}\][\n\r]?\[\{/g,"}]|--|[{").replace(/\}[\n\r]?\[\{/g,"}|--|[{").replace(/\}\][\n\r]?\{/g,"}]|--|{").split("|--|").forEach((function(data){e.lastChunk&&(data=e.lastChunk+data);var n=null;try{n=JSON.parse(data)}catch(t){return e.lastChunk=data,clearTimeout(e.lastChunkTimeout),void(e.lastChunkTimeout=setTimeout((function(){e.reconnectOptions.auto&&e.reconnectOptions.onTimeout?e.reconnect():(e.emit(e.ERROR,c.ConnectionTimeout(e._customTimeout)),e.requestQueue.size>0&&e.requestQueue.forEach((function(t,n){t.callback(c.ConnectionTimeout(e._customTimeout)),e.requestQueue.delete(n)})))}),e._customTimeout))}clearTimeout(e.lastChunkTimeout),e.lastChunk=null,n&&t.push(n)})),t},d.prototype.send=function(e,t){var n=e.id,o={payload:e,callback:t};if(Array.isArray(e)&&(n=e[0].id),this.connection.readyState===this.connection.CONNECTING||this.reconnecting)this.requestQueue.set(n,o);else{if(this.connection.readyState!==this.connection.OPEN)return this.requestQueue.delete(n),this.emit(this.ERROR,c.ConnectionNotOpenError()),void o.callback(c.ConnectionNotOpenError());this.responseQueue.set(n,o),this.requestQueue.delete(n);try{this.connection.send(JSON.stringify(o.payload))}catch(e){o.callback(e),this.responseQueue.delete(n)}}},d.prototype.reset=function(){this.responseQueue.clear(),this.requestQueue.clear(),this.removeAllListeners(),this._removeSocketListeners(),this._addSocketListeners()},d.prototype.disconnect=function(code,e){this._removeSocketListeners(),this.connection.close(code||1e3,e)},d.prototype.supportsSubscriptions=function(){return!0},d.prototype.reconnect=function(){var e=this;this.reconnecting=!0,this.responseQueue.size>0&&this.responseQueue.forEach((function(t,n){t.callback(c.PendingRequestsOnReconnectingError()),e.responseQueue.delete(n)})),!this.reconnectOptions.maxAttempts||this.reconnectAttempts<this.reconnectOptions.maxAttempts?setTimeout((function(){e.reconnectAttempts++,e._removeSocketListeners(),e.emit(e.RECONNECT,e.reconnectAttempts),e.connect()}),this.reconnectOptions.delay):(this.emit(this.ERROR,c.MaxAttemptsReachedOnReconnectingError()),this.reconnecting=!1,this.requestQueue.size>0&&this.requestQueue.forEach((function(t,n){t.callback(c.MaxAttemptsReachedOnReconnectingError()),e.requestQueue.delete(n)})))},e.exports=d},2189:function(e,t,n){(function(t,o){var r="[object process]"===Object.prototype.toString.call(void 0!==t?t:0),c="undefined"!=typeof navigator&&"ReactNative"===navigator.product,l=null,d=null;if(r||c){l=function(e){return o.from(e).toString("base64")};var f=n(112);if(f.URL){var h=f.URL;d=function(e){return new h(e)}}else d=n(112).parse}else l=btoa.bind(window),d=function(e){return new URL(e)};e.exports={parseURL:d,btoa:l}}).call(this,n(30),n(6).Buffer)},2190:function(e,t,n){var o=n(114).errors,r=n(184).XMLHttpRequest,c=n(237),l=n(302),d=function(e,t){t=t||{},this.withCredentials=t.withCredentials||!1,this.timeout=t.timeout||0,this.headers=t.headers,this.agent=t.agent,this.connected=!1;const n=!1!==t.keepAlive;this.host=e||"http://localhost:8545",this.agent||("https"===this.host.substring(0,5)?this.httpsAgent=new l.Agent({keepAlive:n}):this.httpAgent=new c.Agent({keepAlive:n}))};d.prototype._prepareRequest=function(){var e;if("undefined"!=typeof XMLHttpRequest)e=new XMLHttpRequest;else{e=new r;var t={httpsAgent:this.httpsAgent,httpAgent:this.httpAgent,baseUrl:this.baseUrl};this.agent&&(t.httpsAgent=this.agent.https,t.httpAgent=this.agent.http,t.baseUrl=this.agent.baseUrl),e.nodejsSet(t)}return e.open("POST",this.host,!0),e.setRequestHeader("Content-Type","application/json"),e.timeout=this.timeout,e.withCredentials=this.withCredentials,this.headers&&this.headers.forEach((function(header){e.setRequestHeader(header.name,header.value)})),e},d.prototype.send=function(e,t){var n=this,r=this._prepareRequest();r.onreadystatechange=function(){if(4===r.readyState&&1!==r.timeout){var e=r.responseText,c=null;try{e=JSON.parse(e)}catch(e){c=o.InvalidResponse(r.responseText)}n.connected=!0,t(c,e)}},r.ontimeout=function(){n.connected=!1,t(o.ConnectionTimeout(this.timeout))};try{r.send(JSON.stringify(e))}catch(e){this.connected=!1,t(o.InvalidConnection(this.host))}},d.prototype.disconnect=function(){},d.prototype.supportsSubscriptions=function(){return!1},e.exports=d},2191:function(e,t,n){"use strict";var o=n(114).errors,r=n(367),c=function(path,e){var t=this;this.responseCallbacks={},this.notificationCallbacks=[],this.path=path,this.connected=!1,this.connection=e.connect({path:this.path}),this.addDefaultEvents();var n=function(e){var n=null;Array.isArray(e)?e.forEach((function(e){t.responseCallbacks[e.id]&&(n=e.id)})):n=e.id,n||-1===e.method.indexOf("_subscription")?t.responseCallbacks[n]&&(t.responseCallbacks[n](null,e),delete t.responseCallbacks[n]):t.notificationCallbacks.forEach((function(t){"function"==typeof t&&t(e)}))};"Socket"===e.constructor.name?r(this.connection).done(n):this.connection.on("data",(function(data){t._parseResponse(data.toString()).forEach(n)}))};c.prototype.addDefaultEvents=function(){var e=this;this.connection.on("connect",(function(){e.connected=!0})),this.connection.on("close",(function(){e.connected=!1})),this.connection.on("error",(function(){e._timeout()})),this.connection.on("end",(function(){e._timeout()})),this.connection.on("timeout",(function(){e._timeout()}))},c.prototype._parseResponse=function(data){var e=this,t=[];return data.replace(/\}[\n\r]?\{/g,"}|--|{").replace(/\}\][\n\r]?\[\{/g,"}]|--|[{").replace(/\}[\n\r]?\[\{/g,"}|--|[{").replace(/\}\][\n\r]?\{/g,"}]|--|{").split("|--|").forEach((function(data){e.lastChunk&&(data=e.lastChunk+data);var n=null;try{n=JSON.parse(data)}catch(t){return e.lastChunk=data,clearTimeout(e.lastChunkTimeout),void(e.lastChunkTimeout=setTimeout((function(){throw e._timeout(),o.InvalidResponse(data)}),15e3))}clearTimeout(e.lastChunkTimeout),e.lastChunk=null,n&&t.push(n)})),t},c.prototype._addResponseCallback=function(e,t){var n=e.id||e[0].id,o=e.method||e[0].method;this.responseCallbacks[n]=t,this.responseCallbacks[n].method=o},c.prototype._timeout=function(){for(var e in this.responseCallbacks)this.responseCallbacks.hasOwnProperty(e)&&(this.responseCallbacks[e](o.InvalidConnection("on IPC")),delete this.responseCallbacks[e])},c.prototype.reconnect=function(){this.connection.connect({path:this.path})},c.prototype.send=function(e,t){this.connection.writable||this.connection.connect({path:this.path}),this.connection.write(JSON.stringify(e)),this._addResponseCallback(e,t)},c.prototype.on=function(e,t){if("function"!=typeof t)throw new Error("The second parameter callback must be a function.");switch(e){case"data":this.notificationCallbacks.push(t);break;default:this.connection.on(e,t)}},c.prototype.once=function(e,t){if("function"!=typeof t)throw new Error("The second parameter callback must be a function.");this.connection.once(e,t)},c.prototype.removeListener=function(e,t){var n=this;switch(e){case"data":this.notificationCallbacks.forEach((function(e,o){e===t&&n.notificationCallbacks.splice(o,1)}));break;default:this.connection.removeListener(e,t)}},c.prototype.removeAllListeners=function(e){switch(e){case"data":this.notificationCallbacks=[];break;default:this.connection.removeAllListeners(e)}},c.prototype.reset=function(){this._timeout(),this.notificationCallbacks=[],this.connection.removeAllListeners("error"),this.connection.removeAllListeners("end"),this.connection.removeAllListeners("timeout"),this.addDefaultEvents()},c.prototype.supportsSubscriptions=function(){return!0},e.exports=c},313:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isAsync=void 0;var o,r=n(2029),c=(o=r)&&o.__esModule?o:{default:o};var l="function"==typeof Symbol;function d(e){return l&&"AsyncFunction"===e[Symbol.toStringTag]}t.default=function(e){return d(e)?(0,c.default)(e):e},t.isAsync=d},545:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){t|=0;for(var n=Math.max(e.length-t,0),o=Array(n),r=0;r<n;r++)o[r]=e[t+r];return o},e.exports=t.default},546:function(e,t,n){const o=n(717);function r(){}e.exports=r,r.prototype.setEngine=function(e){const t=this;t.engine||(t.engine=e,e.on("block",(function(e){t.currentBlock=e})),e.on("start",(function(){t.start()})),e.on("stop",(function(){t.stop()})))},r.prototype.handleRequest=function(e,t,n){throw new Error("Subproviders should override `handleRequest`.")},r.prototype.emitPayload=function(e,t){this.engine.sendAsync(o(e),t)},r.prototype.stop=function(){},r.prototype.start=function(){}},714:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(){if(null!==e){var t=e;e=null,t.apply(this,arguments)}}},e.exports=t.default},716:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(){if(null===e)throw new Error("Callback was already called.");var t=e;e=null,t.apply(this,arguments)}},e.exports=t.default},717:function(e,t,n){const o=n(2040),r=n(254);e.exports=function(data){return r({id:o(),jsonrpc:"2.0",params:[]},data)}},718:function(e,t,n){const o=n(546);e.exports=class extends o{constructor(e){if(super(),!e)throw new Error("JsonRpcEngineMiddlewareSubprovider - no constructorFn specified");this._constructorFn=e}setEngine(e){if(this.middleware)throw new Error("JsonRpcEngineMiddlewareSubprovider - subprovider added to engine twice");const t=e._blockTracker,n=this._constructorFn({engine:e,provider:e,blockTracker:t});if(!n)throw new Error("JsonRpcEngineMiddlewareSubprovider - _constructorFn did not return middleware");if("function"!=typeof n)throw new Error("JsonRpcEngineMiddlewareSubprovider - specified middleware is not a function");this.middleware=n}handleRequest(e,t,n){const o={id:e.id};this.middleware(e,o,(function(e){t((t,n,r)=>{t?(delete o.result,o.error={message:t.message||t}):o.result=n,e?e(r):r()})}),(function(e){if(e)return n(e);n(null,o.result)}))}}}}]);