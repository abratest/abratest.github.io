/*!For license information please see LICENSES*/(window.webpackJsonp=window.webpackJsonp||[]).push([[127],{1176:function(e,t,r){window,e.exports=function(e,t){if("undefined"==typeof Promise)throw Error("Keycloak requires an environment that supports Promises. Make sure that you include the appropriate polyfill.");var r=!1;function n(){r||(r=!0,console.warn("[KEYCLOAK] Usage of legacy style promise methods such as `.error()` and `.success()` has been deprecated and support will be removed in future versions. Use standard style promise methods such as `.then() and `.catch()` instead."))}function o(e){return e.__proto__=c.prototype,e}function c(e){return o(new Promise(e))}return c.prototype=Object.create(Promise.prototype),c.prototype.constructor=c,c.prototype.success=function(e){return n(),o(this.then((function(t){e(t)})))},c.prototype.error=function(e){return n(),o(this.catch((function(t){e(t)})))},function r(n){if(!(this instanceof r))return new r(n);for(var o,d,l=this,f=[],h={enable:!0,callbackList:[],interval:5},m=document.getElementsByTagName("script"),i=0;i<m.length;i++)-1===m[i].src.indexOf("keycloak.js")&&-1===m[i].src.indexOf("keycloak.min.js")||-1===m[i].src.indexOf("version=")||(l.iframeVersion=m[i].src.substring(m[i].src.indexOf("version=")+8).split("&")[0]);var k=!0,v=N(console.info),w=N(console.warn);function y(e,t){for(var r=function(e){var t=null,r=window.crypto||window.msCrypto;if(r&&r.getRandomValues&&window.Uint8Array)return t=new Uint8Array(e),r.getRandomValues(t),t;t=new Array(e);for(var n=0;n<t.length;n++)t[n]=Math.floor(256*Math.random());return t}(e),n=new Array(e),i=0;i<e;i++)n[i]=t.charCodeAt(r[i]%t.length);return String.fromCharCode.apply(null,n)}function S(){return void 0!==l.authServerUrl?"/"==l.authServerUrl.charAt(l.authServerUrl.length-1)?l.authServerUrl+"realms/"+encodeURIComponent(l.realm):l.authServerUrl+"/realms/"+encodeURIComponent(l.realm):void 0}function U(e,t){var code=e.code,r=e.error,n=e.prompt,o=(new Date).getTime();if(e.kc_action_status&&l.onActionUpdate&&l.onActionUpdate(e.kc_action_status),r)if("none"!=n){var c={error:r,error_description:e.error_description};l.onAuthError&&l.onAuthError(c),t&&t.setError(c)}else t&&t.setSuccess();else if("standard"!=l.flow&&(e.access_token||e.id_token)&&m(e.access_token,null,e.id_token,!0),"implicit"!=l.flow&&code){var d="code="+code+"&grant_type=authorization_code",f=l.endpoints.token(),h=new XMLHttpRequest;h.open("POST",f,!0),h.setRequestHeader("Content-type","application/x-www-form-urlencoded"),d+="&client_id="+encodeURIComponent(l.clientId),d+="&redirect_uri="+e.redirectUri,e.pkceCodeVerifier&&(d+="&code_verifier="+e.pkceCodeVerifier),h.withCredentials=!0,h.onreadystatechange=function(){if(4==h.readyState)if(200==h.status){var e=JSON.parse(h.responseText);m(e.access_token,e.refresh_token,e.id_token,"standard"===l.flow),R()}else l.onAuthError&&l.onAuthError(),t&&t.setError()},h.send(d)}function m(r,n,c,d){A(r,n,c,o=(o+(new Date).getTime())/2),k&&(l.tokenParsed&&l.tokenParsed.nonce!=e.storedNonce||l.refreshTokenParsed&&l.refreshTokenParsed.nonce!=e.storedNonce||l.idTokenParsed&&l.idTokenParsed.nonce!=e.storedNonce)?(v("[KEYCLOAK] Invalid nonce, clearing token"),l.clearToken(),t&&t.setError()):d&&(l.onAuthSuccess&&l.onAuthSuccess(),t&&t.setSuccess())}}function _(e){return 0==e.status&&e.responseText&&e.responseURL.startsWith("file:")}function A(e,t,r,n){if(l.tokenTimeoutHandle&&(clearTimeout(l.tokenTimeoutHandle),l.tokenTimeoutHandle=null),t?(l.refreshToken=t,l.refreshTokenParsed=C(t)):(delete l.refreshToken,delete l.refreshTokenParsed),r?(l.idToken=r,l.idTokenParsed=C(r)):(delete l.idToken,delete l.idTokenParsed),e){if(l.token=e,l.tokenParsed=C(e),l.sessionId=l.tokenParsed.session_state,l.authenticated=!0,l.subject=l.tokenParsed.sub,l.realmAccess=l.tokenParsed.realm_access,l.resourceAccess=l.tokenParsed.resource_access,n&&(l.timeSkew=Math.floor(n/1e3)-l.tokenParsed.iat),null!=l.timeSkew&&(v("[KEYCLOAK] Estimated time difference between browser and server is "+l.timeSkew+" seconds"),l.onTokenExpired)){var o=1e3*(l.tokenParsed.exp-(new Date).getTime()/1e3+l.timeSkew);v("[KEYCLOAK] Token expires in "+Math.round(o/1e3)+" s"),o<=0?l.onTokenExpired():l.tokenTimeoutHandle=setTimeout(l.onTokenExpired,o)}}else delete l.token,delete l.tokenParsed,delete l.subject,delete l.realmAccess,delete l.resourceAccess,l.authenticated=!1}function C(e){switch((e=(e=(e=e.split(".")[1]).replace(/-/g,"+")).replace(/_/g,"/")).length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw"Invalid token"}return e=decodeURIComponent(escape(atob(e))),e=JSON.parse(e)}function O(){var s=y(36,"0123456789abcdef").split("");return s[14]="4",s[19]="0123456789abcdef".substr(3&s[19]|8,1),s[8]=s[13]=s[18]=s[23]="-",s.join("")}function E(e){var t=function(e){var t;switch(l.flow){case"standard":t=["code","state","session_state","kc_action_status"];break;case"implicit":t=["access_token","token_type","id_token","state","session_state","expires_in","kc_action_status"];break;case"hybrid":t=["access_token","id_token","code","state","session_state","kc_action_status"]}t.push("error"),t.push("error_description"),t.push("error_uri");var r,n,o=e.indexOf("?"),c=e.indexOf("#");"query"===l.responseMode&&-1!==o?(r=e.substring(0,o),""!==(n=I(e.substring(o+1,-1!==c?c:e.length),t)).paramsString&&(r+="?"+n.paramsString),-1!==c&&(r+=e.substring(c))):"fragment"===l.responseMode&&-1!==c&&(r=e.substring(0,c),""!==(n=I(e.substring(c+1),t)).paramsString&&(r+="#"+n.paramsString));if(n&&n.oauthParams)if("standard"===l.flow||"hybrid"===l.flow){if((n.oauthParams.code||n.oauthParams.error)&&n.oauthParams.state)return n.oauthParams.newUrl=r,n.oauthParams}else if("implicit"===l.flow&&(n.oauthParams.access_token||n.oauthParams.error)&&n.oauthParams.state)return n.oauthParams.newUrl=r,n.oauthParams}(e);if(t){var r=d.get(t.state);return r&&(t.valid=!0,t.redirectUri=r.redirectUri,t.storedNonce=r.nonce,t.prompt=r.prompt,t.pkceCodeVerifier=r.pkceCodeVerifier),t}}function I(e,t){for(var p=e.split("&"),r={paramsString:"",oauthParams:{}},i=0;i<p.length;i++){var n=p[i].indexOf("="),o=p[i].slice(0,n);-1!==t.indexOf(o)?r.oauthParams[o]=p[i].slice(n+1):(""!==r.paramsString&&(r.paramsString+="&"),r.paramsString+=p[i])}return r}function T(){var p={setSuccess:function(e){p.resolve(e)},setError:function(e){p.reject(e)}};return p.promise=new c((function(e,t){p.resolve=e,p.reject=t})),p}function L(){var e=T();if(!h.enable)return e.setSuccess(),e.promise;if(h.iframe)return e.setSuccess(),e.promise;var iframe=document.createElement("iframe");h.iframe=iframe,iframe.onload=function(){var t=l.endpoints.authorize();"/"===t.charAt(0)?h.iframeOrigin=window.location.origin?window.location.origin:window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:""):h.iframeOrigin=t.substring(0,t.indexOf("/",8)),e.setSuccess()};var t=l.endpoints.checkSessionIframe();iframe.setAttribute("src",t),iframe.setAttribute("title","keycloak-session-iframe"),iframe.style.display="none",document.body.appendChild(iframe);return window.addEventListener("message",(function(e){if(e.origin===h.iframeOrigin&&h.iframe.contentWindow===e.source&&("unchanged"==e.data||"changed"==e.data||"error"==e.data)){"unchanged"!=e.data&&l.clearToken();for(var t=h.callbackList.splice(0,h.callbackList.length),i=t.length-1;i>=0;--i){var r=t[i];"error"==e.data?r.setError():r.setSuccess("unchanged"==e.data)}}}),!1),e.promise}function R(){h.enable&&l.token&&setTimeout((function(){x().then((function(e){e&&R()}))}),1e3*h.interval)}function x(){var e=T();if(h.iframe&&h.iframeOrigin){var t=l.clientId+" "+(l.sessionId?l.sessionId:"");h.callbackList.push(e);var r=h.iframeOrigin;1==h.callbackList.length&&h.iframe.contentWindow.postMessage(t,r)}else e.setSuccess();return e.promise}function P(e){if(!e||"default"==e)return{login:function(e){return window.location.replace(l.createLoginUrl(e)),T().promise},logout:function(e){return window.location.replace(l.createLogoutUrl(e)),T().promise},register:function(e){return window.location.replace(l.createRegisterUrl(e)),T().promise},accountManagement:function(){var e=l.createAccountUrl();if(void 0===e)throw"Not supported by the OIDC server";return window.location.href=e,T().promise},redirectUri:function(e,t){return 1==arguments.length&&(t=!0),e&&e.redirectUri?e.redirectUri:l.redirectUri?l.redirectUri:location.href}};if("cordova"==e){h.enable=!1;var t=function(e,t,r){return window.cordova&&window.cordova.InAppBrowser?window.cordova.InAppBrowser.open(e,t,r):window.open(e,t,r)},r=function(e){var t=function(e){return e&&e.cordovaOptions?Object.keys(e.cordovaOptions).reduce((function(t,r){return t[r]=e.cordovaOptions[r],t}),{}):{}}(e);return t.location="no",e&&"none"==e.prompt&&(t.hidden="yes"),function(e){return Object.keys(e).reduce((function(t,r){return t.push(r+"="+e[r]),t}),[]).join(",")}(t)};return{login:function(e){var n=T(),o=r(e),c=l.createLoginUrl(e),d=t(c,"_blank",o),f=!1,h=!1,m=function(){h=!0,d.close()};return d.addEventListener("loadstart",(function(e){0==e.url.indexOf("http://localhost")&&(U(E(e.url),n),m(),f=!0)})),d.addEventListener("loaderror",(function(e){f||(0==e.url.indexOf("http://localhost")?(U(E(e.url),n),m(),f=!0):(n.setError(),m()))})),d.addEventListener("exit",(function(e){h||n.setError({reason:"closed_by_user"})})),n.promise},logout:function(e){var r,n=T(),o=l.createLogoutUrl(e),c=t(o,"_blank","location=no,hidden=yes");return c.addEventListener("loadstart",(function(e){0==e.url.indexOf("http://localhost")&&c.close()})),c.addEventListener("loaderror",(function(e){0==e.url.indexOf("http://localhost")||(r=!0),c.close()})),c.addEventListener("exit",(function(e){r?n.setError():(l.clearToken(),n.setSuccess())})),n.promise},register:function(e){var n=T(),o=l.createRegisterUrl(),c=r(e),d=t(o,"_blank",c);return d.addEventListener("loadstart",(function(e){0==e.url.indexOf("http://localhost")&&(d.close(),U(E(e.url),n))})),n.promise},accountManagement:function(){var e=l.createAccountUrl();if(void 0===e)throw"Not supported by the OIDC server";var r=t(e,"_blank","location=no");r.addEventListener("loadstart",(function(e){0==e.url.indexOf("http://localhost")&&r.close()}))},redirectUri:function(e){return"http://localhost"}}}if("cordova-native"==e)return h.enable=!1,{login:function(e){var t=T(),r=l.createLoginUrl(e);return universalLinks.subscribe("keycloak",(function(e){universalLinks.unsubscribe("keycloak"),window.cordova.plugins.browsertab.close(),U(E(e.url),t)})),window.cordova.plugins.browsertab.openUrl(r),t.promise},logout:function(e){var t=T(),r=l.createLogoutUrl(e);return universalLinks.subscribe("keycloak",(function(e){universalLinks.unsubscribe("keycloak"),window.cordova.plugins.browsertab.close(),l.clearToken(),t.setSuccess()})),window.cordova.plugins.browsertab.openUrl(r),t.promise},register:function(e){var t=T(),r=l.createRegisterUrl(e);return universalLinks.subscribe("keycloak",(function(e){universalLinks.unsubscribe("keycloak"),window.cordova.plugins.browsertab.close(),U(E(e.url),t)})),window.cordova.plugins.browsertab.openUrl(r),t.promise},accountManagement:function(){var e=l.createAccountUrl();if(void 0===e)throw"Not supported by the OIDC server";window.cordova.plugins.browsertab.openUrl(e)},redirectUri:function(e){return e&&e.redirectUri?e.redirectUri:l.redirectUri?l.redirectUri:"http://localhost"}};throw"invalid adapter type: "+e}l.init=function(e){l.authenticated=!1,d=function(){try{return new j}catch(e){}return new M}();if(o=e&&["default","cordova","cordova-native"].indexOf(e.adapter)>-1?P(e.adapter):e&&"object"==typeof e.adapter?e.adapter:window.Cordova||window.cordova?P("cordova"):P(),e){if(void 0!==e.useNonce&&(k=e.useNonce),void 0!==e.checkLoginIframe&&(h.enable=e.checkLoginIframe),e.checkLoginIframeInterval&&(h.interval=e.checkLoginIframeInterval),"login-required"===e.onLoad&&(l.loginRequired=!0),e.responseMode){if("query"!==e.responseMode&&"fragment"!==e.responseMode)throw"Invalid value for responseMode";l.responseMode=e.responseMode}if(e.flow){switch(e.flow){case"standard":l.responseType="code";break;case"implicit":l.responseType="id_token token";break;case"hybrid":l.responseType="code id_token token";break;default:throw"Invalid value for flow"}l.flow=e.flow}if(null!=e.timeSkew&&(l.timeSkew=e.timeSkew),e.redirectUri&&(l.redirectUri=e.redirectUri),e.silentCheckSsoRedirectUri&&(l.silentCheckSsoRedirectUri=e.silentCheckSsoRedirectUri),"boolean"==typeof e.silentCheckSsoFallback?l.silentCheckSsoFallback=e.silentCheckSsoFallback:l.silentCheckSsoFallback=!0,e.pkceMethod){if("S256"!==e.pkceMethod)throw"Invalid value for pkceMethod";l.pkceMethod=e.pkceMethod}"boolean"==typeof e.enableLogging?l.enableLogging=e.enableLogging:l.enableLogging=!1}l.responseMode||(l.responseMode="fragment"),l.responseType||(l.responseType="code",l.flow="standard");var t=T(),r=T();r.promise.then((function(){l.onReady&&l.onReady(l.authenticated),t.setSuccess(l.authenticated)})).catch((function(e){t.setError(e)}));var c=function(e){var t,r=T();n?"string"==typeof n&&(t=n):t="keycloak.json";function o(e){l.endpoints=e?{authorize:function(){return e.authorization_endpoint},token:function(){return e.token_endpoint},logout:function(){if(!e.end_session_endpoint)throw"Not supported by the OIDC server";return e.end_session_endpoint},checkSessionIframe:function(){if(!e.check_session_iframe)throw"Not supported by the OIDC server";return e.check_session_iframe},register:function(){throw'Redirection to "Register user" page not supported in standard OIDC mode'},userinfo:function(){if(!e.userinfo_endpoint)throw"Not supported by the OIDC server";return e.userinfo_endpoint}}:{authorize:function(){return S()+"/protocol/openid-connect/auth"},token:function(){return S()+"/protocol/openid-connect/token"},logout:function(){return S()+"/protocol/openid-connect/logout"},checkSessionIframe:function(){var e=S()+"/protocol/openid-connect/login-status-iframe.html";return l.iframeVersion&&(e=e+"?version="+l.iframeVersion),e},thirdPartyCookiesIframe:function(){var e=S()+"/protocol/openid-connect/3p-cookies/step1.html";return l.iframeVersion&&(e=e+"?version="+l.iframeVersion),e},register:function(){return S()+"/protocol/openid-connect/registrations"},userinfo:function(){return S()+"/protocol/openid-connect/userinfo"}}}if(t){(f=new XMLHttpRequest).open("GET",t,!0),f.setRequestHeader("Accept","application/json"),f.onreadystatechange=function(){if(4==f.readyState)if(200==f.status||_(f)){var e=JSON.parse(f.responseText);l.authServerUrl=e["auth-server-url"],l.realm=e.realm,l.clientId=e.resource,o(null),r.setSuccess()}else r.setError()},f.send()}else{if(!n.clientId)throw"clientId missing";l.clientId=n.clientId;var c=n.oidcProvider;if(c){var d,f;if("string"==typeof c)d="/"==c.charAt(c.length-1)?c+".well-known/openid-configuration":c+"/.well-known/openid-configuration",(f=new XMLHttpRequest).open("GET",d,!0),f.setRequestHeader("Accept","application/json"),f.onreadystatechange=function(){4==f.readyState&&(200==f.status||_(f)?(o(JSON.parse(f.responseText)),r.setSuccess()):r.setError())},f.send();else o(c),r.setSuccess()}else{if(!n.url)for(var h=document.getElementsByTagName("script"),i=0;i<h.length;i++)if(h[i].src.match(/.*keycloak\.js/)){n.url=h[i].src.substr(0,h[i].src.indexOf("/js/keycloak.js"));break}if(!n.realm)throw"realm missing";l.authServerUrl=n.url,l.realm=n.realm,o(null),r.setSuccess()}}return r.promise}();function f(){var t=function(e){e||(o.prompt="none"),l.login(o).then((function(){r.setSuccess()})).catch((function(){r.setError()}))},n=function(){var e=document.createElement("iframe"),t=l.createLoginUrl({prompt:"none",redirectUri:l.silentCheckSsoRedirectUri});e.setAttribute("src",t),e.setAttribute("title","keycloak-silent-check-sso"),e.style.display="none",document.body.appendChild(e);var n=function(t){t.origin===window.location.origin&&e.contentWindow===t.source&&(U(E(t.data),r),document.body.removeChild(e),window.removeEventListener("message",n))};window.addEventListener("message",n)},o={};switch(e.onLoad){case"check-sso":h.enable?L().then((function(){x().then((function(e){e?r.setSuccess():l.silentCheckSsoRedirectUri?n():t(!1)})).catch((function(){r.setError()}))})):l.silentCheckSsoRedirectUri?n():t(!1);break;case"login-required":t(!0);break;default:throw"Invalid value for onLoad"}}function m(){var t=E(window.location.href);if(t&&window.history.replaceState(window.history.state,null,t.newUrl),t&&t.valid)return L().then((function(){U(t,r)})).catch((function(e){r.setError()}));e?e.token&&e.refreshToken?(A(e.token,e.refreshToken,e.idToken),h.enable?L().then((function(){x().then((function(e){e?(l.onAuthSuccess&&l.onAuthSuccess(),r.setSuccess(),R()):r.setSuccess()})).catch((function(){r.setError()}))})):l.updateToken(-1).then((function(){l.onAuthSuccess&&l.onAuthSuccess(),r.setSuccess()})).catch((function(){l.onAuthError&&l.onAuthError(),e.onLoad?f():r.setError()}))):e.onLoad?f():r.setSuccess():r.setSuccess()}return c.then((function(){(function(){var e=T();if(h.enable||l.silentCheckSsoRedirectUri){var iframe=document.createElement("iframe");iframe.setAttribute("src",l.endpoints.thirdPartyCookiesIframe()),iframe.setAttribute("title","keycloak-3p-check-iframe"),iframe.style.display="none",document.body.appendChild(iframe);var t=function(r){iframe.contentWindow===r.source&&("supported"!==r.data&&"unsupported"!==r.data?e.setError():"unsupported"===r.data&&(h.enable=!1,l.silentCheckSsoFallback&&(l.silentCheckSsoRedirectUri=!1),w("[KEYCLOAK] 3rd party cookies aren't supported by this browser. checkLoginIframe and silent check-sso are not available.")),document.body.removeChild(iframe),window.removeEventListener("message",t),e.setSuccess())};window.addEventListener("message",t,!1)}else e.setSuccess();return e.promise})().then(m).catch((function(){t.setError()}))})),c.catch((function(){t.setError()})),t.promise},l.login=function(e){return o.login(e)},l.createLoginUrl=function(r){var n,c,f=O(),h=O(),m=o.redirectUri(r),v={state:f,nonce:h,redirectUri:encodeURIComponent(m)};r&&r.prompt&&(v.prompt=r.prompt),n=r&&"register"==r.action?l.endpoints.register():l.endpoints.authorize(),c=r&&r.scope?-1!=r.scope.indexOf("openid")?r.scope:"openid "+r.scope:"openid";var w=n+"?client_id="+encodeURIComponent(l.clientId)+"&redirect_uri="+encodeURIComponent(m)+"&state="+encodeURIComponent(f)+"&response_mode="+encodeURIComponent(l.responseMode)+"&response_type="+encodeURIComponent(l.responseType)+"&scope="+encodeURIComponent(c);if(k&&(w=w+"&nonce="+encodeURIComponent(h)),r&&r.prompt&&(w+="&prompt="+encodeURIComponent(r.prompt)),r&&r.maxAge&&(w+="&max_age="+encodeURIComponent(r.maxAge)),r&&r.loginHint&&(w+="&login_hint="+encodeURIComponent(r.loginHint)),r&&r.idpHint&&(w+="&kc_idp_hint="+encodeURIComponent(r.idpHint)),r&&r.action&&"register"!=r.action&&(w+="&kc_action="+encodeURIComponent(r.action)),r&&r.locale&&(w+="&ui_locales="+encodeURIComponent(r.locale)),l.pkceMethod){var S=y(96,"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789");v.pkceCodeVerifier=S,w+="&code_challenge="+function(r,n){switch(r){case"S256":var o=new Uint8Array(e.arrayBuffer(n));return t.fromByteArray(o).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"");default:throw"Invalid value for pkceMethod"}}(l.pkceMethod,S),w+="&code_challenge_method="+l.pkceMethod}return d.add(v),w},l.logout=function(e){return o.logout(e)},l.createLogoutUrl=function(e){return l.endpoints.logout()+"?redirect_uri="+encodeURIComponent(o.redirectUri(e,!1))},l.register=function(e){return o.register(e)},l.createRegisterUrl=function(e){return e||(e={}),e.action="register",l.createLoginUrl(e)},l.createAccountUrl=function(e){var t=S(),r=void 0;return void 0!==t&&(r=t+"/account?referrer="+encodeURIComponent(l.clientId)+"&referrer_uri="+encodeURIComponent(o.redirectUri(e))),r},l.accountManagement=function(){return o.accountManagement()},l.hasRealmRole=function(e){var t=l.realmAccess;return!!t&&t.roles.indexOf(e)>=0},l.hasResourceRole=function(e,t){if(!l.resourceAccess)return!1;var r=l.resourceAccess[t||l.clientId];return!!r&&r.roles.indexOf(e)>=0},l.loadUserProfile=function(){var e=S()+"/account",t=new XMLHttpRequest;t.open("GET",e,!0),t.setRequestHeader("Accept","application/json"),t.setRequestHeader("Authorization","bearer "+l.token);var r=T();return t.onreadystatechange=function(){4==t.readyState&&(200==t.status?(l.profile=JSON.parse(t.responseText),r.setSuccess(l.profile)):r.setError())},t.send(),r.promise},l.loadUserInfo=function(){var e=l.endpoints.userinfo(),t=new XMLHttpRequest;t.open("GET",e,!0),t.setRequestHeader("Accept","application/json"),t.setRequestHeader("Authorization","bearer "+l.token);var r=T();return t.onreadystatechange=function(){4==t.readyState&&(200==t.status?(l.userInfo=JSON.parse(t.responseText),r.setSuccess(l.userInfo)):r.setError())},t.send(),r.promise},l.isTokenExpired=function(e){if(!l.tokenParsed||!l.refreshToken&&"implicit"!=l.flow)throw"Not authenticated";if(null==l.timeSkew)return v("[KEYCLOAK] Unable to determine if token is expired as timeskew is not set"),!0;var t=l.tokenParsed.exp-Math.ceil((new Date).getTime()/1e3)+l.timeSkew;if(e){if(isNaN(e))throw"Invalid minValidity";t-=e}return t<0},l.updateToken=function(e){var t=T();if(!l.refreshToken)return t.setError(),t.promise;e=e||5;var r=function(){var r=!1;if(-1==e?(r=!0,v("[KEYCLOAK] Refreshing token: forced refresh")):l.tokenParsed&&!l.isTokenExpired(e)||(r=!0,v("[KEYCLOAK] Refreshing token: token expired")),r){var n="grant_type=refresh_token&refresh_token="+l.refreshToken,o=l.endpoints.token();if(f.push(t),1==f.length){var c=new XMLHttpRequest;c.open("POST",o,!0),c.setRequestHeader("Content-type","application/x-www-form-urlencoded"),c.withCredentials=!0,n+="&client_id="+encodeURIComponent(l.clientId);var d=(new Date).getTime();c.onreadystatechange=function(){if(4==c.readyState)if(200==c.status){v("[KEYCLOAK] Token refreshed"),d=(d+(new Date).getTime())/2;var e=JSON.parse(c.responseText);A(e.access_token,e.refresh_token,e.id_token,d),l.onAuthRefreshSuccess&&l.onAuthRefreshSuccess();for(var p=f.pop();null!=p;p=f.pop())p.setSuccess(!0)}else{w("[KEYCLOAK] Failed to refresh token"),400==c.status&&l.clearToken(),l.onAuthRefreshError&&l.onAuthRefreshError();for(p=f.pop();null!=p;p=f.pop())p.setError(!0)}},c.send(n)}}else t.setSuccess(!1)};h.enable?x().then((function(){r()})).catch((function(){t.setError()})):r();return t.promise},l.clearToken=function(){l.token&&(A(null,null,null),l.onAuthLogout&&l.onAuthLogout(),l.loginRequired&&l.login())};var j=function(){if(!(this instanceof j))return new j;localStorage.setItem("kc-test","test"),localStorage.removeItem("kc-test");function e(){for(var time=(new Date).getTime(),i=0;i<localStorage.length;i++){var e=localStorage.key(i);if(e&&0==e.indexOf("kc-callback-")){var t=localStorage.getItem(e);if(t)try{var r=JSON.parse(t).expires;(!r||r<time)&&localStorage.removeItem(e)}catch(t){localStorage.removeItem(e)}}}}this.get=function(t){if(t){var r="kc-callback-"+t,n=localStorage.getItem(r);return n&&(localStorage.removeItem(r),n=JSON.parse(n)),e(),n}},this.add=function(t){e();var r="kc-callback-"+t.state;t.expires=(new Date).getTime()+36e5,localStorage.setItem(r,JSON.stringify(t))}},M=function(){if(!(this instanceof M))return new M;this.get=function(n){if(n){var o=t("kc-callback-"+n);return r("kc-callback-"+n,"",e(-100)),o?JSON.parse(o):void 0}},this.add=function(t){r("kc-callback-"+t.state,JSON.stringify(t),e(60))},this.removeItem=function(t){r(t,"",e(-100))};var e=function(e){var t=new Date;return t.setTime(t.getTime()+60*e*1e3),t},t=function(e){for(var t=e+"=",r=document.cookie.split(";"),i=0;i<r.length;i++){for(var n=r[i];" "==n.charAt(0);)n=n.substring(1);if(0==n.indexOf(t))return n.substring(t.length,n.length)}return""},r=function(e,t,r){var n=e+"="+t+"; expires="+r.toUTCString()+"; ";document.cookie=n}};function N(e){return function(){l.enableLogging&&e.apply(console,Array.prototype.slice.call(arguments))}}}}(r(1064),r(2128))},1485:function(e,t,r){"use strict";var n=r(231);function o(e,t,r){if(t||(t="sha1"),r||(r="base64"),!(this instanceof o))return new o(e,t,r);if(!e||!(0 in e))throw new Error("Keys must be provided.");function d(data,e){return n.createHmac(t,e).update(data).digest(r).replace(/\/|\+|=/g,(function(e){return{"/":"_","+":"-","=":""}[e]}))}this.sign=function(data){return d(data,e[0])},this.verify=function(data,e){return this.index(data,e)>-1},this.index=function(data,t){for(var i=0,r=e.length;i<r;i++)if(c(t,d(data,e[i])))return i;return-1}}o.sign=o.verify=o.index=function(){throw new Error("Usage: require('keygrip')(<array-of-keys>)")};var c=function(e,t){if(null==e&&null!=t)return!1;if(null==t&&null!=e)return!1;if(null==e&&null==t)return!0;if(e.length!==t.length)return!1;for(var r=0,i=0;i<e.length;i++)r|=e.charCodeAt(i)^t.charCodeAt(i);return 0===r};e.exports=o},2128:function(e,t,r){"use strict";t.byteLength=function(e){var t=l(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){var t,i,r=l(e),n=r[0],d=r[1],f=new c(function(e,t,r){return 3*(t+r)/4-r}(0,n,d)),h=0,m=d>0?n-4:n;for(i=0;i<m;i+=4)t=o[e.charCodeAt(i)]<<18|o[e.charCodeAt(i+1)]<<12|o[e.charCodeAt(i+2)]<<6|o[e.charCodeAt(i+3)],f[h++]=t>>16&255,f[h++]=t>>8&255,f[h++]=255&t;2===d&&(t=o[e.charCodeAt(i)]<<2|o[e.charCodeAt(i+1)]>>4,f[h++]=255&t);1===d&&(t=o[e.charCodeAt(i)]<<10|o[e.charCodeAt(i+1)]<<4|o[e.charCodeAt(i+2)]>>2,f[h++]=t>>8&255,f[h++]=255&t);return f},t.fromByteArray=function(e){for(var t,r=e.length,o=r%3,c=[],i=0,d=r-o;i<d;i+=16383)c.push(f(e,i,i+16383>d?d:i+16383));1===o?(t=e[r-1],c.push(n[t>>2]+n[t<<4&63]+"==")):2===o&&(t=(e[r-2]<<8)+e[r-1],c.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"="));return c.join("")};for(var n=[],o=[],c="undefined"!=typeof Uint8Array?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,d=code.length;i<d;++i)n[i]=code[i],o[code.charCodeAt(i)]=i;function l(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function f(e,t,r){for(var o,c,output=[],i=t;i<r;i+=3)o=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(255&e[i+2]),output.push(n[(c=o)>>18&63]+n[c>>12&63]+n[c>>6&63]+n[63&c]);return output.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},438:function(e,t,r){"use strict";function n(e,t,r){"object"==typeof r.value&&(r.value=o(r.value)),r.enumerable&&!r.get&&!r.set&&r.configurable&&r.writable&&"__proto__"!==t?e[t]=r.value:Object.defineProperty(e,t,r)}function o(e){if("object"!=typeof e)return e;var t,r,c,i=0,d=Object.prototype.toString.call(e);if("[object Object]"===d?c=Object.create(e.__proto__||null):"[object Array]"===d?c=Array(e.length):"[object Set]"===d?(c=new Set,e.forEach((function(e){c.add(o(e))}))):"[object Map]"===d?(c=new Map,e.forEach((function(e,t){c.set(o(t),o(e))}))):"[object Date]"===d?c=new Date(+e):"[object RegExp]"===d?c=new RegExp(e.source,e.flags):"[object DataView]"===d?c=new e.constructor(o(e.buffer)):"[object ArrayBuffer]"===d?c=e.slice(0):"Array]"===d.slice(-6)&&(c=new e.constructor(e)),c){for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)n(c,r[i],Object.getOwnPropertyDescriptor(e,r[i]));for(i=0,r=Object.getOwnPropertyNames(e);i<r.length;i++)Object.hasOwnProperty.call(c,t=r[i])&&c[t]===e[t]||n(c,t,Object.getOwnPropertyDescriptor(e,t))}return c||e}r.d(t,"a",(function(){return o}))}}]);