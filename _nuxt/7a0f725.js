(window.webpackJsonp=window.webpackJsonp||[]).push([[461],{2602:function(e,t,r){"use strict";r.r(t),r.d(t,"state",(function(){return l})),r.d(t,"getters",(function(){return d})),r.d(t,"mutations",(function(){return f})),r.d(t,"actions",(function(){return w}));r(12);var n=r(0),c=r(1),o=r(36),l=function(){return{behaviours:{selected:{},all:{0:{id:null,name:"None"},1:{id:1,name:"Avatar"},2:{id:2,name:"Basic Platform"},3:{id:3,name:"Bird"},4:{id:4,name:"Button"},5:{id:5,name:"Door"},6:{id:6,name:"Ground Prey"},7:{id:7,name:"Ground Predator"},8:{id:8,name:"Citizen"},9:{id:9,name:"Farmer"},10:{id:10,name:"Ally Fighter"},11:{id:11,name:"Healer"},13:{id:13,name:"Plant"},12:{id:12,name:"Question"},14:{id:14,name:"Replace Asset"},15:{id:15,name:"Asset Spawner"},16:{id:16,name:"Multi"},17:{id:17,name:"Void"},19:{id:19,name:"Message Broadcaster"},20:{id:20,name:"Enemy Fighter"}}},setExclusive:{data:null,status:"success"},setBasic:{data:null,status:"success"}}},d=c.b,f=c.c,w={setExclusive:function(e,t){return Object(n.a)(regeneratorRuntime.mark((function r(){var n,l,d,f;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n=e.commit,l=t.id,d=t.exclusive,f=Object(c.a)(n,"setExclusive"),r.prev=3,f.loading(0),!d){r.next=10;break}return r.next=8,o.a.setExclusive(l);case 8:r.next=12;break;case 10:return r.next=12,o.a.removeExclusive(l);case 12:f.success(),r.next=19;break;case 15:throw r.prev=15,r.t0=r.catch(3),f.error(Object(c.d)(r.t0)),r.t0;case 19:case"end":return r.stop()}}),r,null,[[3,15]])})))()},setBasic:function(e,t){return Object(n.a)(regeneratorRuntime.mark((function r(){var n,l,d,f;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n=e.commit,l=t.id,d=t.basic,f=Object(c.a)(n,"setBasic"),r.prev=3,f.loading(0),!d){r.next=10;break}return r.next=8,o.a.setBasic(l);case 8:r.next=12;break;case 10:return r.next=12,o.a.removeBasic(l);case 12:f.success(),r.next=19;break;case 15:throw r.prev=15,r.t0=r.catch(3),f.error(Object(c.d)(r.t0)),r.t0;case 19:case"end":return r.stop()}}),r,null,[[3,15]])})))()}}},2603:function(e,t,r){"use strict";r.r(t),r.d(t,"state",(function(){return ne})),r.d(t,"mutations",(function(){return ae})),r.d(t,"getters",(function(){return ue})),r.d(t,"actions",(function(){return Oe}));r(32),r(24),r(22),r(25),r(53),r(54),r(15),r(12),r(49),r(46),r(50);var n,c,o=r(10),l=r(0),d=r(82),f=r(171),w=r(1361),m=r(1362),h=r.n(m),v=r(40),x=r.n(v),k=r(151),R=r(9),O=r(1),y=r(13),j=r(16);function W(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function S(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?W(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):W(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var A=!1,I=null;function U(e,t,r){e("setState",{field:t,value:r})}function T(e,t){return P.apply(this,arguments)}function P(){return(P=Object(l.a)(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(j.k)(t,r);case 3:return n=e.sent,e.abrupt("return",n);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0.message.includes("Transaction rejected")&&Object(y.d)({title:"Signature rejected"}),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function B(){return E.apply(this,arguments)}function E(){return(E=Object(l.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h()();case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function L(){return C.apply(this,arguments)}function C(){return(C=Object(l.a)(regeneratorRuntime.mark((function e(){var t,r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;break;case 2:if(I){e.next=7;break}return e.next=5,B();case 5:(t=e.sent)?(t.autoRefreshOnNetworkChange=!1,I=new x.a(t)):window.web3&&(I=new x.a(window.web3.currentProvider));case 7:if(r=localStorage.getItem("walletconnect"),n=localStorage.getItem("-walletlink:https://www.walletlink.org:session:linked"),!r){e.next=14;break}return e.next=13,Object(j.h)();case 13:I=e.sent;case 14:if(!n||1!=n){e.next=18;break}return e.next=17,Object(j.g)();case 17:I=e.sent;case 18:return window.builtInWeb3=I,e.abrupt("return",I);case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];for(var c=0,o=r;c<o.length;c++){var l=o[c];if(l===e.loginStatus)return!1}throw console.error("loginStatus "+e.loginStatus+" not valid here, can only be called from "+r),Error("loginStatus "+e.loginStatus+" not valid here, can only be called from "+r)}function F(){var e=1,t="mainnet";if(R.C){t={1:"mainnet",4:"rinkeby",5:"goerli",137:"polygon",80001:"mumbai"}[e=R.m]}return{httpURL:R.B.http,wsURL:R.B.ws,chainId:e,networkName:t}}function H(){var e=F().networkName;return"goerli"===e?{network:{chainId:5,rpcUrl:R.j[5].http||R.j[5].ws}}:{networkName:e}}function N(e){return M.apply(this,arguments)}function M(){return(M=Object(l.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",w.a.getWallet(t).then((function(e){return e&&!!e.userId})).catch((function(e){if(e&&e.response&&404===e.response.status)return!1;throw Object(y.d)({title:"An error has ocurred. Please try again."}),e})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(e,t){U(e,"currentUser",t),t?(U(e,"loginStatus","LoggedIn"),localStorage.setItem("userId",t.id)):(U(e,"loginStatus","LoggedOut"),localStorage.removeItem("userId"))}function D(){return _.apply(this,arguments)}function _(){return(_=Object(l.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",f.a.isLoggedIn().then((function(e){return e.data})).catch((function(){return null})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(e){return e.Wallets&&e.Wallets.length>0?e.Wallets[0]:null}function G(e,t){return J.apply(this,arguments)}function J(){return(J=Object(l.a)(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;break;case 2:return e.next=4,k.c();case 4:return n=e.sent,e.next=7,k.d();case 7:return e.abrupt("return",Z(t,n,r,"arkane"));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(e,t){return K.apply(this,arguments)}function K(){return(K=Object(l.a)(regeneratorRuntime.mark((function e(t,r){var c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return c=new x.a(n.getProvider(H())),e.abrupt("return",Z(t,c,r,"bitski"));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(e,t){return Y.apply(this,arguments)}function Y(){return(Y=Object(l.a)(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(A){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,L();case 4:return n=e.sent,e.abrupt("return",Z(t,n,r,"builtin"));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(e,t,r,n){return ee.apply(this,arguments)}function ee(){return(ee=Object(l.a)(regeneratorRuntime.mark((function e(t,r,n,c){var o,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(U(t,"walletType",c),r){e.next=3;break}return e.abrupt("return");case 3:return window.web3=r,U(t,"walletStatus","CheckingWallet"),e.prev=5,e.next=8,r.eth.getAccounts();case 8:o=e.sent,e.next=14;break;case 11:e.prev=11,e.t0=e.catch(5),o=[];case 14:return e.next=16,r.eth.net.getId();case 16:l=e.sent,te(t,l,n,o);case 18:case"end":return e.stop()}}),e,null,[[5,11]])})))).apply(this,arguments)}function te(e,t,r,n){return re.apply(this,arguments)}function re(){return(re=Object(l.a)(regeneratorRuntime.mark((function e(t,r,n,c){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(U(t,"chainId",r),0!==c.length){e.next=4;break}return U(t,"walletStatus","Locked"),e.abrupt("return");case 4:o=c[0],U(t,"walletAddress",o),n&&(n.address.toLowerCase()===o.toLowerCase()?U(t,"walletStatus","Ready"):U(t,"walletStatus","WrongWalletAddress"));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ne=function(){return{builtInWalletPresent:null,walletStatus:null,walletType:null,walletAddress:null,chainId:null,walletAddressAccountless:null,needToLogoutAccountless:!1,loginStatus:null,loginType:null,currentUser:null,requireSignup:null,chosenWalletType:null,error:null,updateUser:{data:null,status:"success"},requestVerifyEmail:{data:null,status:"success"},verifyEmail:{data:null,status:"success"},verifyCode:{data:null,status:"success"},isEmailVerified:{data:null,status:"success"},checkPassword:{data:null,status:"success"},requestSecurityCode:{data:null,status:"success"},requestRestore:null,addWallet:null,arkaneHint:null,oauthUser:null}},ae=S(S({},O.c),{},{setState:function(e,t){e[t.field]=t.value}}),ue=S(S({},O.b),{},{getUser:function(e){return e.currentUser},getWallet:function(e){return e.currentUser&&e.currentUser.Wallets&&e.currentUser.Wallets.length>0&&e.currentUser.Wallets[0].address},getWalletAccountless:function(e){return e.walletAddressAccountless},getWalletUser:function(e){return e.walletAddress}});function se(e){var t;if(e){var r=function(){try{return navigator.userAgent.toLowerCase()}catch(e){return""}}();return r.includes("tokenpocket")?"tokenpocket":e.isWombat||"wombat"===e.host?"wombat":e.isMetaMask||"metamask"===e.host?"metamask":e.isCoinbaseWallet?"coinbase":e.isWalletConnect||"wconnect"===e.host?"wconnect":(null===(t=e.webBaseUrl)||void 0===t?void 0:t.indexOf("https://sign.bitski.com"))>=0?"bitski":e.isTrust?"trust":e.isMetaMask||"metamask"===e.host?"metamask":e.isGoWallet?"goWallet":e.isAlphaWallet?"alphaWallet":e.isStatus?"status":e.isToshi?"toshi":void 0!==window.__CIPHER__?"cipher":"EthereumProvider"===e.constructor.name?"mist":r.includes("opera")||r.includes("opr/")||r.includes("opt/")?"opera":"Web3FrameProvider"===e.constructor.name?"parity":e.host&&-1!==e.host.indexOf("infura")?"infura":e.host&&-1!==e.host.indexOf("localhost")?"localhost":void 0}}function ce(e,t,r,n){return ie.apply(this,arguments)}function ie(){return(ie=Object(l.a)(regeneratorRuntime.mark((function e(t,r,n,c){var o,l,f,address,w,m,h,v,x;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.state,l=t.commit,f=t.dispatch,!o.currentUser){e.next=3;break}throw new Error(n+" Invalid state.");case 3:if(e.prev=3,U(l,"walletType",c),r){e.next=7;break}return e.abrupt("return");case 7:return window.web3=r,e.next=10,Object(j.m)();case 10:return address=e.sent,U(l,"walletAddress",address),e.next=14,N(address);case 14:if(w=e.sent,U(l,"requireSignup",!w),w){e.next=23;break}if("arkane"!==c){e.next=22;break}return e.next=20,k.a();case 20:m=e.sent,U(l,"arkaneUser",m);case 22:throw new Error("Wallet not registered");case 23:return e.next=25,d.a.loginBuiltInRequest(address).then((function(e){return e.data}));case 25:return h=e.sent,e.next=28,T(h,address);case 28:return v=e.sent,x=v.signature,e.next=32,d.a.loginBuiltInVerify(address,x,h,c);case 32:return e.abrupt("return",f("loadUser",!0));case 35:throw e.prev=35,e.t0=e.catch(3),U(l,"error",{message:n,error:e.t0.toString()}),e.t0;case 39:case"end":return e.stop()}}),e,null,[[3,35]])})))).apply(this,arguments)}function oe(e,t,r,n,c){return le.apply(this,arguments)}function le(){return(le=Object(l.a)(regeneratorRuntime.mark((function e(t,r,n,c,o){var l,f,w,address,m,h,v,x,k,R,O;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=t.state,f=t.commit,w=t.dispatch,!l.currentUser){e.next=3;break}throw new Error(n+" Invalid state.");case 3:if(e.prev=3,U(f,"walletType",c),window.web3=r,!o){e.next=10;break}e.t0=o,e.next=13;break;case 10:return e.next=12,Object(j.m)();case 12:e.t0=e.sent;case 13:return address=e.t0,U(f,"walletAddress",address),e.next=17,N(address);case 17:if(m=e.sent,U(f,"requireSignup",!m),!m){e.next=33;break}return e.next=22,d.a.loginBuiltInRequest(address).then((function(e){return e.data}));case 22:return h=e.sent,e.next=25,T(h,address);case 25:return v=e.sent,x=v.signature,e.next=29,d.a.loginBuiltInVerify(address,x,h,c);case 29:return w("setTempUser",{address:null}),e.abrupt("return",w("loadUser",!0));case 33:return e.next=35,d.a.loginAccountlessRequest(address).then((function(e){return e.data}));case 35:return k=e.sent,e.next=38,T(k,address);case 38:return R=e.sent,O=R.signature,e.next=42,d.a.loginAccountlessVerify(address,O,k);case 42:w("setTempUser",{address:address});case 43:e.next=49;break;case 45:throw e.prev=45,e.t1=e.catch(3),U(f,"error",{message:n,error:e.t1.toString()}),e.t1;case 49:case"end":return e.stop()}}),e,null,[[3,45]])})))).apply(this,arguments)}function pe(e,t,r,n,c){return de.apply(this,arguments)}function de(){return(de=Object(l.a)(regeneratorRuntime.mark((function e(t,r,n,c,o){var l,f,w,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=t.commit,e.prev=1,U(l,"walletType",c),window.web3=r,U(l,"walletAddress",o),e.next=7,d.a.loginAccountlessRequest(o).then((function(e){return e.data}));case 7:return f=e.sent,e.next=10,T(f,o);case 10:return w=e.sent,m=w.signature,e.next=14,d.a.loginAccountlessVerify(o,m,f);case 14:e.next=20;break;case 16:throw e.prev=16,e.t0=e.catch(1),U(l,"error",{message:n,error:e.t0.toString()}),e.t0;case 20:case"end":return e.stop()}}),e,null,[[1,16]])})))).apply(this,arguments)}function fe(e,t,r,n,c,o){return ge.apply(this,arguments)}function ge(){return(ge=Object(l.a)(regeneratorRuntime.mark((function e(t,r,n,c,o,l){var f,w,address,m,h,v,x,k,R,O,y;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f=t.commit,w=t.state,address=l.address,m=l.username,h=l.email,w.requireSignup){e.next=4;break}throw new Error(n+" Invalid state.");case 4:return e.prev=4,U(f,"walletType",c),window.web3=r,v=address||w.walletAddress,e.next=10,d.a.signupBuiltInRequest({username:m,email:h,address:v});case 10:return x=e.sent,k=x.data,U(f,"loginStatus","WaitingSignupSignature"),e.next=15,T(k,v);case 15:return R=e.sent,O=R.signature,U(f,"loginStatus",c+"SigningUp"),e.next=20,d.a.signupBuiltInVerify({challenge:k,signature:O,address:v,username:m,email:h,type:o});case 20:y=e.sent,$(f,y),U(f,"walletType",c),U(f,"loginStatus","LoggedIn"),e.next=31;break;case 26:throw e.prev=26,e.t0=e.catch(4),U(f,"error",{code:"1",message:n,error:e.t0.toString()}),U(f,"loginStatus",c+"FillSignUpInfo"),e.t0;case 31:case"end":return e.stop()}}),e,null,[[4,26]])})))).apply(this,arguments)}function we(e,t,r,n){return me.apply(this,arguments)}function me(){return(me=Object(l.a)(regeneratorRuntime.mark((function e(t,r,n,c){var o,l,address,f,w,m,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.state,l=t.commit,o.currentUser){e.next=3;break}throw new Error(n+" Invalid state.");case 3:return e.prev=3,U(l,"walletType",c),window.web3=r,e.next=8,Object(j.m)();case 8:return address=e.sent,U(l,"walletAddress",address),e.next=12,N(address);case 12:if(!e.sent){e.next=16;break}throw Object(y.d)({title:"Wallet already registered"}),new Error("Wallet already registered");case 16:return e.next=18,d.a.addBuiltInRequest({address:address}).then((function(e){return e.data}));case 18:return f=e.sent,e.next=21,T(f,address);case 21:return w=e.sent,m=w.signature,e.next=25,d.a.addBuiltInVerify({challenge:f,signature:m,address:address,walletType:c});case 25:return U(l,"walletType",c),e.next=28,D();case 28:h=e.sent,$(l,h),e.next=36;break;case 32:throw e.prev=32,e.t0=e.catch(3),U(l,"error",{message:n,error:e.t0.toString()}),e.t0;case 36:case"end":return e.stop()}}),e,null,[[3,32]])})))).apply(this,arguments)}function be(e,t,r,n,c,o,l){return he.apply(this,arguments)}function he(){return(he=Object(l.a)(regeneratorRuntime.mark((function e(t,r,n,c,o,l,d){var f,w,m,h,v,x,k,R;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f=t.state,w=t.commit,!f.currentUser){e.next=3;break}throw new Error(n+" Invalid state.");case 3:return e.prev=3,U(w,"walletType",c),e.next=7,r();case 7:if(m=e.sent){e.next=10;break}throw new Error(c+" not initialized");case 10:return window.web3=m,e.next=13,o();case 13:if(h=e.sent){e.next=16;break}throw new Error("Wallet locked");case 16:return e.next=18,Object(j.m)();case 18:if(v=e.sent){e.next=24;break}return U(w,"error",{code:"111",message:n+"Failure",error:"Wallet locked"}),U(w,"walletStatus","Locked"),Object(y.d)({title:"Wallet locked"}),e.abrupt("return");case 24:return U(w,"walletAddress",v),e.next=27,N(v);case 27:if(x=e.sent,U(w,"requireSignup",!x),U(w,"walletStatus","Ready"),U(w,"loginType",c),x){e.next=34;break}throw U(w,"oauthUser",h),new Error("Wallet not registered");case 34:return U(w,"loginStatus","WebWalletLoggingIn"),e.next=37,l();case 37:return k=e.sent,e.next=40,d(v,k);case 40:return e.next=42,D();case 42:R=e.sent,$(w,R),U(w,"walletType",c),U(w,"loginStatus","LoggedIn"),U(w,"loginType",c),e.next=54;break;case 49:throw e.prev=49,e.t0=e.catch(3),U(w,"error",{code:"1000",message:n+"Failed",error:e.t0.toString()}),U(w,"loginStatus","LoggedOut"),e.t0;case 54:case"end":return e.stop()}}),e,null,[[3,49]])})))).apply(this,arguments)}function ve(e,t,r,n,c,o,l){return xe.apply(this,arguments)}function xe(){return(xe=Object(l.a)(regeneratorRuntime.mark((function e(t,r,n,c,o,l,d){var f,w,m,h,v,x,k,R;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f=t.state,w=t.commit,m=d.email,h=d.username,f.requireSignup&&f.walletType===n){e.next=4;break}throw new Error(r+" Invalid state.");case 4:return U(w,"loginStatus","WebWalletSigningUp"),e.prev=5,v=f.walletAddress,e.next=9,c();case 9:return x=e.sent,e.next=12,o();case 12:return k=e.sent,e.next=15,l({address:v,email:m,emailVerified:x.emailVerified,token:k,username:h});case 15:R=e.sent,$(w,R),U(w,"walletType",n),U(w,"loginStatus","LoggedIn"),U(w,"loginType",n),e.next=27;break;case 22:throw e.prev=22,e.t0=e.catch(5),U(w,"error",{code:"2",message:r+"Failure",error:e.t0.toString()}),U(w,"loginStatus","WebWalletFillSignUpInfo"),e.t0;case 27:case"end":return e.stop()}}),e,null,[[5,22]])})))).apply(this,arguments)}function ke(e,t,r,n,c,o,l){return Re.apply(this,arguments)}function Re(){return(Re=Object(l.a)(regeneratorRuntime.mark((function e(t,r,n,c,o,l,d){var f,w,m,h,v;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f=t.commit,t.state.currentUser){e.next=3;break}throw new Error("addWalletBitski Invalid state.");case 3:return e.prev=3,U(f,"walletType",c),e.next=7,r();case 7:if(w=e.sent){e.next=10;break}throw new Error(c+" not initialized");case 10:return window.web3=w,e.next=13,o();case 13:return e.next=15,Object(j.m)();case 15:if(m=e.sent){e.next=21;break}return U(f,"error",{code:"111",message:n+"Failure",error:"Wallet locked"}),U(f,"walletStatus","Locked"),Object(y.d)({title:"Wallet locked"}),e.abrupt("return");case 21:return U(f,"walletAddress",m),e.next=24,N(m);case 24:if(!e.sent){e.next=28;break}throw Object(y.d)({title:"Wallet already registered"}),new Error("Wallet already registered");case 28:return e.next=30,l();case 30:return h=e.sent,e.next=33,d({address:m,token:h});case 33:return e.next=35,D();case 35:v=e.sent,$(f,v),U(f,"walletType",c),U(f,"loginStatus","LoggedIn"),U(f,"loginType",c),e.next=46;break;case 42:throw e.prev=42,e.t0=e.catch(3),U(f,"error",{message:"addWalletBitski",error:e.t0.toString()}),e.t0;case 46:case"end":return e.stop()}}),e,null,[[3,42]])})))).apply(this,arguments)}var Oe={init:function(){n=n||window.bitski,c=c||window.AuthenticationStatus},setTempUser:function(e,t){U(e.commit,"walletAddressAccountless",t.address)},setRequireSignup:function(e,t){U(e.commit,"requireSignup",t)},setWalletUser:function(e,t){U(e.commit,"walletAddress",t.address)},setNeedToLogoutAccountless:function(e,t){U(e.commit,"needToLogoutAccountless",t.needToLogout)},acknowledgeError:function(e){return Object(l.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:U(e.commit,"error",null);case 2:case"end":return t.stop()}}),t)})))()},checkAndUpdateUserLoginStatus:function(e){return Object(l.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.dispatch("loadUser",!0);case 1:case"end":return t.stop()}}),t)})))()},loadUser:function(e,t){return Object(l.a)(regeneratorRuntime.mark((function r(){var n,c,o,d,f,w,m,h,v,k;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n=e.commit,t){r.next=25;break}return U(n,"loginStatus","Loading"),U(n,"walletStatus","Loading"),r.next=6,L();case 6:if(c=r.sent,o="none",!c){r.next=17;break}return r.next=11,B();case 11:(d=r.sent)&&"function"==typeof d.on&&(d.on("chainChanged",Object(l.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.eth.net.getId();case 2:t=e.sent,U(n,"chainId",t);case 4:case"end":return e.stop()}}),e)})))),A=!0,U(n,"builtInWalletPresent",!0)),window.web3=c,o=se(c.currentProvider),r.next=20;break;case 17:f=F(),w=f.wsURL,m=f.chainId,window.web3=new x.a(w),U(n,"chainId",m),A=!1,U(n,"builtInWalletPresent",!1);case 20:return U(n,"web3WalletType",o),r.next=24,new Promise((function(e){return setTimeout(e,0)}));case 24:window.$nuxt&&window.$nuxt.$gtmEvent({event:"web3Wallet",web3Wallet:o});case 25:return r.next=27,D();case 27:(h=r.sent)?(delete h.email,$(n,h),window.$nuxt&&window.$nuxt.$gtmEvent({event:"userReconnected",userId:h.id,userName:h.username,userEmal:h.email,loginType:h.loginType}),U(n,"loginStatus","LoggedIn"),v=z(h),k=h.loginType||"legacy",U(n,"loginType",k),"arkane"===k?G(n,v):"bitski"===k?Q(n,v):"builtin"===k?X(n,v):v&&v.type&&("arkane"===v.type?G(n,v):"bitski"===v.type?Q(n,v):X(n,v))):(U(n,"loginStatus","LoggedOut"),$(n,null),X(n));case 29:case"end":return r.stop()}}),r)})))()},loginWithBitski:function(e){return Object(l.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",be(e,Object(l.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new x.a(n.getProvider(H())));case 1:case"end":return e.stop()}}),e)}))),"loginWithBitski","bitski",(function(){return n.signIn()}),(function(){return n.authProvider.getAccessToken()}),d.a.loginBitski));case 1:case"end":return t.stop()}}),t)})))()},loginWithWConnect:function(e){return Object(l.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(j.h)();case 2:return r=t.sent,t.abrupt("return",ce(e,r,"loginWithWConnect","wconnect"));case 4:case"end":return t.stop()}}),t)})))()},loginWithBuiltIn:function(e){return Object(l.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,L();case 2:return r=t.sent,t.abrupt("return",ce(e,r,"loginWithBuiltIn","builtin"));case 4:case"end":return t.stop()}}),t)})))()},loginWithCoinbase:function(e){return Object(l.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(j.g)();case 2:return r=t.sent,t.abrupt("return",ce(e,r,"loginWithCoinbase","coinbase"));case 4:case"end":return t.stop()}}),t)})))()},loginWithBuiltInAccountlessOption:function(e){var t=arguments;return Object(l.a)(regeneratorRuntime.mark((function r(){var n,c;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=t.length>1&&void 0!==t[1]?t[1]:null,r.next=3,L();case 3:return c=r.sent,r.abrupt("return",oe(e,c,"loginWithBuiltInAccountlessOption","builtin",n));case 5:case"end":return r.stop()}}),r)})))()},updateBuiltInAccountless:function(e,t){return Object(l.a)(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,L();case 2:return n=r.sent,r.abrupt("return",pe(e,n,"loginWithBuiltInAccountlessOption","builtin",t));case 4:case"end":return r.stop()}}),r)})))()},loginWithArkane:function(e){return Object(l.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",be(e,Object(l.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k.e(e.state.arkaneHint);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),"loginWithArkane","arkane",k.a,k.b,d.a.loginArkane));case 1:case"end":return t.stop()}}),t)})))()},signupViaBitski:function(e,t){return Object(l.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",ve(e,"signupViaBitski","bitski",(function(){return n.getUser()}),(function(){return n.authProvider.getAccessToken()}),d.a.signupBitski,t));case 1:case"end":return r.stop()}}),r)})))()},signupViaBuiltInWallet:function(e,t){return Object(l.a)(regeneratorRuntime.mark((function r(){var n,c;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,L();case 2:return n=r.sent,c=se(n.currentProvider),r.abrupt("return",fe(e,n,"signupViaBuiltInWallet","builtin",c,t));case 5:case"end":return r.stop()}}),r)})))()},signupViaWConnect:function(e,t){return Object(l.a)(regeneratorRuntime.mark((function r(){var n,c;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(j.h)();case 2:return n=r.sent,c=se(n.currentProvider),r.abrupt("return",fe(e,n,"signupViaWConnect","wconnect",c,t));case 5:case"end":return r.stop()}}),r)})))()},signupViaArkaneWallet:function(e,t){return Object(l.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",ve(e,"signupViaBitski","arkane",k.a,k.b,d.a.signupArkane,t));case 1:case"end":return r.stop()}}),r)})))()},signupViaCoinbase:function(e,t){return Object(l.a)(regeneratorRuntime.mark((function r(){var n,c;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(j.g)();case 2:return n=r.sent,c=se(n.currentProvider),r.abrupt("return",fe(e,n,"signupViaCoinbase","coinbase",c,t));case 5:case"end":return r.stop()}}),r)})))()},logout:function(e){var t=arguments;return Object(l.a)(regeneratorRuntime.mark((function r(){var c,o,l,f,w,m;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:c=e.commit,o=e.state,l=e.dispatch,f=t.length>1&&void 0!==t[1]?t[1]:{},w=f.isLoggedOut,m=f.waitForAuth,r.prev=2,V(o,"LoggedIn"),U(c,"loginStatus","LoggingOut"),r.next=11;break;case 7:return r.prev=7,r.t0=r.catch(2),r.next=11,l("logoutAccountless");case 11:if(r.prev=11,w){r.next=27;break}if("bitski"!==o.walletType){r.next=18;break}return r.next=16,n.signOut();case 16:r.next=21;break;case 18:if("arkane"!==o.walletType){r.next=21;break}return r.next=21,k.f();case 21:return r.next=23,d.a.logout().catch((function(e){if(e&&e.response&&401!==e.response.status)throw e}));case 23:return r.next=25,l("logoutAccountless");case 25:return r.next=27,X(c);case 27:if(!window.web3||!window.web3.currentProvider||!window.web3.currentProvider.isWalletConnect&&!window.web3.currentProvider.isCoinbaseWallet){r.next=41;break}if(!window.web3.currentProvider.isWalletConnect){r.next=33;break}return r.next=31,window.web3.currentProvider.disconnect();case 31:r.next=41;break;case 33:if(!window.web3.currentProvider.isCoinbaseWallet){r.next=39;break}if(m){r.next=37;break}return r.next=37,window.web3.currentProvider.close();case 37:r.next=41;break;case 39:return r.next=41,window.web3.currentProvider.close();case 41:return localStorage.getItem("-walletlink:https://www.walletlink.org:Addresses")&&localStorage.removeItem("-walletlink:https://www.walletlink.org:Addresses"),window.web3=null,I=null,A=!1,U(c,"web3WalletType","none"),$(c,null),U(c,"walletType",null),U(c,"walletAddressAccountless",null),U(c,"walletAddress",null),U(c,"loginType",null),r.next=53,l("loadUser");case 53:U(c,"loginStatus","LoggedOut"),"WrongWalletAddress"===o.walletStatus&&(U(c,"requireSignup",!1),U(c,"walletStatus","Ready")),r.next=61;break;case 57:r.prev=57,r.t1=r.catch(11),console.error("cannot logout",r.t1),U(c,"loginStatus","LoggedIn");case 61:case"end":return r.stop()}}),r,null,[[2,7],[11,57]])})))()},logoutAccountless:function(e){var t=arguments;return Object(l.a)(regeneratorRuntime.mark((function r(){var n,c,o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n=e.state,c=e.dispatch,o=t.length>1&&void 0!==t[1]&&t[1],!n.walletAddressAccountless&&!o){r.next=5;break}return r.next=5,d.a.logoutAccountless().then((function(){n.walletAddressAccountless&&c("setTempUser",{address:null})})).catch((function(e){if(e&&e.response&&401!==e.response.status)throw e}));case 5:case"end":return r.stop()}}),r)})))()},refreshUser:function(e){return Object(l.a)(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.commit,t.prev=1,t.next=4,D();case 4:return n=t.sent,$(r,n),t.abrupt("return",n);case 9:t.prev=9,t.t0=t.catch(1);case 11:case"end":return t.stop()}}),t,null,[[1,9]])})))()},updateUser:function(e,data){return Object(l.a)(regeneratorRuntime.mark((function t(){var r,n,c,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.commit,n=Object(O.a)(r,"updateUser"),t.prev=2,n.loading(0),t.next=6,f.a.updateUser(data);case 6:return c=t.sent,t.next=9,D();case 9:return o=t.sent,$(r,o),n.success(c),t.abrupt("return",c);case 15:throw t.prev=15,t.t0=t.catch(2),n.error(Object(O.d)(t.t0)),t.t0;case 19:case"end":return t.stop()}}),t,null,[[2,15]])})))()},checkPassword:function(e,data){return Object(l.a)(regeneratorRuntime.mark((function t(){var r,n,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.commit,n=Object(O.a)(r,"checkPassword"),t.prev=2,n.loading(0),t.next=6,f.a.checkPassword(data);case 6:return c=t.sent,n.success(c),t.abrupt("return",c);case 11:throw t.prev=11,t.t0=t.catch(2),n.error(Object(O.d)(t.t0)),t.t0;case 15:case"end":return t.stop()}}),t,null,[[2,11]])})))()},requestSecurityCode:function(e,data){return Object(l.a)(regeneratorRuntime.mark((function t(){var r,n,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.commit,n=Object(O.a)(r,"requestSecurityCode"),t.prev=2,n.loading(0),t.next=6,f.a.requestSecurityCode(data);case 6:return c=t.sent,n.success(c),t.abrupt("return",c);case 11:throw t.prev=11,t.t0=t.catch(2),n.error(Object(O.d)(t.t0)),t.t0;case 15:case"end":return t.stop()}}),t,null,[[2,11]])})))()},verifyCode:function(e,data){return Object(l.a)(regeneratorRuntime.mark((function t(){var r,n,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.commit,n=Object(O.a)(r,"verifyCode"),t.prev=2,n.loading(0),t.next=6,f.a.verifyCode(data);case 6:return c=t.sent,n.success(c),t.abrupt("return",c);case 11:throw t.prev=11,t.t0=t.catch(2),n.error(Object(O.d)(t.t0)),t.t0;case 15:case"end":return t.stop()}}),t,null,[[2,11]])})))()},requestVerifyEmail:function(e,data){return Object(l.a)(regeneratorRuntime.mark((function t(){var r,n,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.commit,n=Object(O.a)(r,"requestVerifyEmail"),t.prev=2,n.loading(0),t.next=6,f.a.requestVerifyEmail(data);case 6:return c=t.sent,n.success(c),t.abrupt("return",c);case 11:throw t.prev=11,t.t0=t.catch(2),n.error(Object(O.d)(t.t0)),t.t0;case 15:case"end":return t.stop()}}),t,null,[[2,11]])})))()},verifyEmail:function(e,data){return Object(l.a)(regeneratorRuntime.mark((function t(){var r,n,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.commit,n=Object(O.a)(r,"verifyEmail"),t.prev=2,n.loading(0),t.next=6,f.a.verifyEmail(data);case 6:return c=t.sent,n.success(c),t.abrupt("return",c);case 11:throw t.prev=11,t.t0=t.catch(2),n.error(Object(O.d)(t.t0)),t.t0;case 15:case"end":return t.stop()}}),t,null,[[2,11]])})))()},isEmailVerified:function(e,data){return Object(l.a)(regeneratorRuntime.mark((function t(){var r,n,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.commit,n=Object(O.a)(r,"isEmailVerified"),t.prev=2,n.loading(0),t.next=6,f.a.isEmailVerified(data);case 6:return c=t.sent,n.success(c),t.abrupt("return",c);case 11:throw t.prev=11,t.t0=t.catch(2),n.error(Object(O.d)(t.t0)),t.t0;case 15:case"end":return t.stop()}}),t,null,[[2,11]])})))()},addWalletBuiltIn:function(e){return Object(l.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,L();case 2:return r=t.sent,t.abrupt("return",we(e,r,"addWalletBuiltIn","builtin"));case 4:case"end":return t.stop()}}),t)})))()},addWalletWConnect:function(e){return Object(l.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(j.h)();case 2:return r=t.sent,t.abrupt("return",we(e,r,"addWalletWConnect","wconnect"));case 4:case"end":return t.stop()}}),t)})))()},addWalletCoinbase:function(e){return Object(l.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(j.g)();case 2:return r=t.sent,t.abrupt("return",we(e,r,"addWalletCoinbase","wconnect"));case 4:case"end":return t.stop()}}),t)})))()},addWalletArkane:function(e){return Object(l.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",ke(e,Object(l.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",k.c(e.state.arkaneHint));case 1:case"end":return t.stop()}}),t)}))),"addWalletArkane","arkane",k.a,k.b,d.a.addArkane));case 1:case"end":return t.stop()}}),t)})))()},addWalletBitski:function(e){return Object(l.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",ke(e,Object(l.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new x.a(n.getProvider(H())));case 1:case"end":return e.stop()}}),e)}))),"addWalletBitski","bitski",(function(){return n.signIn()}),(function(){return n.authProvider.getAccessToken()}),d.a.addBitski));case 1:case"end":return t.stop()}}),t)})))()},signIn:function(e,t){return Object(l.a)(regeneratorRuntime.mark((function r(){var n,c,o,l;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=e.commit,c=e.dispatch,o=t.username,l=t.password,V(ne,void 0,"LoggedOut"),U(n,"loginStatus","LoginInWithLegacy"),r.abrupt("return",d.a.loginPassword(o,l).then((function(){return c("loadUser",!0)})).catch((function(e){throw U(n,"error",{code:"1000",message:"loginLegacyFailed",error:e.response?e.response.data:e.toString()}),U(n,"loginStatus","LoggedOut"),e})));case 5:case"end":return r.stop()}}),r)})))()},setArkaneHint:function(e,t){return Object(l.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:U(e.commit,"arkaneHint",t);case 2:case"end":return r.stop()}}),r)})))()},cleanSelectedWallet:function(e){return Object(l.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:U(e.commit,"walletType",null);case 2:case"end":return t.stop()}}),t)})))()}}},2604:function(e,t,r){"use strict";r.r(t),r.d(t,"state",(function(){return l})),r.d(t,"mutations",(function(){return d})),r.d(t,"getters",(function(){return f})),r.d(t,"actions",(function(){return w}));r(12);var n=r(0),c=r(18),o=r(171),l=function(){return{selectedUser:{data:null,status:"success"},user:{data:null,status:"success"}}},d={registerState:function(e,t){e[t.state]={status:t.status,data:t.data}}},f={get:function(e){return function(t){var r=e[t];return r&&"success"===r.status?r.data:null}}},w={selectUser:function(e,t){return Object(c.a)(e.commit,"selectedUser").success(t)},getUser:function(e,t){return Object(n.a)(regeneratorRuntime.mark((function r(){var n,l,d;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=e.commit,r.prev=1,(l=Object(c.a)(n,"user")).loading(0),r.next=6,o.a.getUser(t);case 6:d=r.sent,l.success(d),r.next=14;break;case 10:throw r.prev=10,r.t0=r.catch(1),console.error(r.t0),r.t0;case 14:case"end":return r.stop()}}),r,null,[[1,10]])})))()}}}}]);