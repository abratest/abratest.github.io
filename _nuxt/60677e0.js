(window.webpackJsonp=window.webpackJsonp||[]).push([[483],{2161:function(t,e,r){"use strict";r.r(e),r.d(e,"mutations",(function(){return d})),r.d(e,"getters",(function(){return l})),r.d(e,"state",(function(){return f})),r.d(e,"actions",(function(){return m}));r(12);var n=r(0),o=r(82),c=r(1),d=c.c,l=c.b,f=function(){return{requestRestoreUsername:{data:null,status:"success"},requestRestorePassword:{data:null,status:"success"},restorePassword:{data:null,status:"success"},getCsrfToken:{data:null,status:"success"}}},m={setProperty:c.e,requestRestorePassword:function(t,e){return Object(n.a)(regeneratorRuntime.mark((function r(){var n,d,l;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=t.commit,d=Object(c.a)(n,"requestRestorePassword"),r.prev=2,d.loading(0),r.next=6,o.a.requestRestorePassword({username:e});case 6:l=r.sent,d.success(l),r.next=14;break;case 10:throw r.prev=10,r.t0=r.catch(2),d.error(Object(c.d)(r.t0)),r.t0;case 14:case"end":return r.stop()}}),r,null,[[2,10]])})))()},restorePassword:function(t,e){return Object(n.a)(regeneratorRuntime.mark((function r(){var n,d,l,f,m;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=t.commit,d=e.newPassword,l=e.restoreToken,f=Object(c.a)(n,"restorePassword"),r.prev=3,f.loading(0),r.next=7,o.a.restorePassword({newPassword:d,restoreToken:l});case 7:m=r.sent,f.success(m),r.next=15;break;case 11:throw r.prev=11,r.t0=r.catch(3),f.error(Object(c.d)(r.t0)),r.t0;case 15:case"end":return r.stop()}}),r,null,[[3,11]])})))()},getCsrfToken:function(t){return Object(n.a)(regeneratorRuntime.mark((function e(){var r,n,d,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.commit,n=Object(c.a)(r,"getCsrfToken"),e.prev=2,e.next=5,o.a.getCsrfToken();case 5:d=e.sent,l=d.csrfToken,sessionStorage.setItem("csrf",l),n.success(l),e.next=15;break;case 11:throw e.prev=11,e.t0=e.catch(2),n.error(Object(c.d)(e.t0)),e.t0;case 15:case"end":return e.stop()}}),e,null,[[2,11]])})))()}}},2162:function(t,e,r){"use strict";r.r(e),r.d(e,"state",(function(){return j})),r.d(e,"getters",(function(){return L})),r.d(e,"mutations",(function(){return y})),r.d(e,"actions",(function(){return w}));r(32),r(24),r(25),r(58),r(1192),r(22),r(15);var n=r(43),o=r(10),c=(r(49),r(12),r(0)),d=r(1),l=r(141),f=r(177),m=r(36),v=r(5);function h(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function O(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?h(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):h(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var j=function(){return{avatar:{data:null,status:"loading"},lastCustomAvatar:{data:null,status:"loading"},avatarToSave:{data:{head:null,torso:null,legs:null,feet:null,body:null,skinColorArrayHead:null,skinColorArrayFeet:null,skinColorArrayTorso:null,skinColorArrayLegs:null,accentColorArrayHead:null,accentColorArrayFeet:null,accentColorArrayTorso:null,accentColorArrayLegs:null},status:"loading"},showAvatarInLogin:{data:!1,status:"loading"},isOnAvatarPage:{data:!1,status:"loading"},gltfInUsed:{data:null,status:"loading"},gltfInUsedData:{data:null,status:"loading"},assetLists:{data:{body:null,head:null,feet:null,legs:null,torso:null},status:"loading"},assetListsSaved:{data:{head:{},feet:{},legs:{},torso:{}},status:"loading"},assetCurrentIds:{data:{},status:"loading"},assetListsLength:{data:{body:0,head:0,feet:0,legs:0,torso:0},status:"loading"},assetOwnedList:{data:[],status:"loading"},assetOwnedListAll:{data:[],status:"loading"},assetOwnedListLength:{data:0,status:"Loading"},assetShopLists:{data:{head:null,feet:null,legs:null,torso:null,body:null},status:"loading"},assetShopListsBodyLength:{data:0,status:"Loading"},currentBundleCreation:{data:null,status:"loading"},WEBGLIsAvailable:{data:null,status:"loading"},activeTypeMesh:{data:"body",status:"loading"},activeAssetList:{data:[],status:"loading"},activeAssetListLength:{data:null,status:"loading"},canLeaveAvatarPage:{data:!1,status:"loading"},firstLoad:{data:!0,status:"Loading"},tabId:{data:3,status:"Loading"},menuId:{data:1,status:"Loading"},offsetMenu:{data:0,status:"Loading"},showSelectedAvatarPage:{data:!1,status:"Loading"},menuOpen:{data:!0,status:"Loading"},searchValue:{data:"",status:"Loading"},filterActive:{data:0,status:"Loading"},filterName:{data:"+name",status:"Loading"},collectionActive:{data:{id:0,name:"All",image:"/img/23_Avatar/menu-all.svg",className:"menu-icon"},status:"Loading"},activeCollections:{data:{0:{name:"All",image:"/img/23_Avatar/menu-all.svg",className:"menu-icon"}},status:"Loading"},activeCollectionsIds:{data:[0],status:"Loading"},avatarSaved:{data:!0,status:"Loading"},newAsset:{data:null,status:"Loading"},isCustomFilter:{data:!1,status:"Loading"},showNotSavePopUp:{data:!1,status:"Loading"},showExternalAvatarsPopUp:{data:!1,status:"Loading"},isAddressIsWhitelisted:{data:!1,status:"Loading"},showBg:{data:!0,status:"Loading"}}},L=d.b,y=d.c,w={getAvatarId:function(t){return Object(c.a)(regeneratorRuntime.mark((function e(){var r,n,o,c,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.commit,n=t.rootState,o=n.user.currentUser,(c=Object(d.a)(r,"avatar")).loading(0),f=null,!o){e.next=9;break}return e.next=8,l.a.getAvatar(o.id);case 8:f=e.sent;case 9:c.success(f);case 10:case"end":return e.stop()}}),e)})))()},getAvatar:Object(v.a)({prop:"avatar",func:l.a.getAvatar}),setAvatar:function(t,e){var r=t.commit;Object(d.a)(r,"avatar").success(e)},showAvatarInLogin:function(t,e){var r=t.commit;Object(d.a)(r,"showAvatarInLogin").success(e)},updateAssetCurrentIds:function(t,e){var r=t.commit;Object(d.a)(r,"assetCurrentIds").success(e)},setIsOnAvatarPage:function(t,e){var r=t.commit;Object(d.a)(r,"isOnAvatarPage").success(e)},saveAvatarV2:Object(v.a)({prop:"avatar",func:l.a.saveAvatarV2}),saveAvatarV0:Object(v.a)({prop:"avatar",func:l.a.saveAvatarV0}),saveAvatarToSave:function(t,e){var r=t.commit;Object(d.a)(r,"avatarToSave").success(e)},getGltf:function(t,e){var r=t.commit;return l.a.getGltf(e).then((function(t){var e=JSON.stringify(t.data);Object(d.a)(r,"gltfInUsed").success(e),Object(d.a)(r,"gltfInUsedData").success(t.data)}))},getOldGltf:function(t,e){var r=t.commit;return l.a.getOldGltf(e).then((function(t){var e=JSON.stringify(t.data);Object(d.a)(r,"gltfInUsed").success(e)}))},getAvatarsV1:function(t,e){var r=t.commit,n=t.state,o=e.sortBy,c=e.limit,f=e.offset,m=e.name,v=e.bodypart;return l.a.getAvatarsV1(o,c,f,m,v).then((function(t){var e={head:n.assetLists.data.head,legs:n.assetLists.data.legs,feet:n.assetLists.data.feet,torso:n.assetLists.data.torso,body:n.assetLists.data.body},o={head:n.assetListsLength.data.head,legs:n.assetListsLength.data.legs,feet:n.assetListsLength.data.feet,torso:n.assetListsLength.data.torso,body:n.assetListsLength.data.body},c={head:n.assetListsSaved.data.head,legs:n.assetListsSaved.data.legs,feet:n.assetListsSaved.data.feet,torso:n.assetListsSaved.data.torso};e[v]=t[v].rows.map((function(t){return{id:t.id,name:t.name,defaultAnimation:t.defaultAnimation,resized:t.resized}})),e[v]=e[v].filter((function(t){return"T"!==t.defaultAnimation})),o[v]=t[v].count,e[v].map((function(t){c[v][t.id]=t})),Object(d.a)(r,"assetLists").success(e),Object(d.a)(r,"assetListsLength").success(o),Object(d.a)(r,"assetListsSaved").success(c)}))},getAvatarsBundles:function(t,e){var r=t.commit,n=t.state,o=e.sortBy,c=e.limit,f=e.offset,m=e.name;return l.a.getAvatarsBundles(o,c,f,m).then((function(t){var e={head:n.assetLists.data.head,legs:n.assetLists.data.legs,feet:n.assetLists.data.feet,torso:n.assetLists.data.torso,body:t.rows},o={head:n.assetListsLength.data.head,legs:n.assetListsLength.data.legs,feet:n.assetListsLength.data.feet,torso:n.assetListsLength.data.torso,body:t.count};Object(d.a)(r,"assetLists").success(e),Object(d.a)(r,"assetListsLength").success(o)}))},getBodyparts:function(t,e){var r=t.commit,n=t.state,o=e.sortBy,c=e.limit,f=e.offset,m=e.name,v=e.bodypart;return l.a.getBodyparts(o,c,f,m,v).then((function(t){var e={head:n.assetLists.data.head,legs:n.assetLists.data.legs,feet:n.assetLists.data.feet,torso:n.assetLists.data.torso,body:n.assetLists.data.body},o={head:n.assetListsLength.data.head,legs:n.assetListsLength.data.legs,feet:n.assetListsLength.data.feet,torso:n.assetListsLength.data.torso,body:n.assetListsLength.data.body},c={head:n.assetListsSaved.data.head,legs:n.assetListsSaved.data.legs,feet:n.assetListsSaved.data.feet,torso:n.assetListsSaved.data.torso},l=function(t){return t.filter((function(t){return"T"!==t.defaultAnimation})).map((function(t){var e=!t.exclusive&&!t.basic;return{name:t.name,id:t.id,description:"",owned:e}}))};e[v]=l(t.bodyparts.rows),o[v]=t.bodyparts.count,l(t.bodyparts.rows).map((function(t){c[v][t.id]=t})),Object(d.a)(r,"assetLists").success(e),Object(d.a)(r,"assetListsLength").success(o),Object(d.a)(r,"assetListsSaved").success(c)}))},getAvatarsPremium:function(t,e){var r=t.commit,n=t.state,o=e.sortBy,c=e.limit,l=e.offset,f=e.name;return m.a.searchAssets({types:[4],sale:!0,sortBy:o,limit:c,offset:l,s:f}).then((function(t){var e={head:n.assetShopLists.data.head,legs:n.assetShopLists.data.legs,feet:n.assetShopLists.data.feet,torso:n.assetShopLists.data.torso,body:t.data.rows};Object(d.a)(r,"assetShopLists").success(e),Object(d.a)(r,"assetShopListsBodyLength").success(t.data.count)}))},getAvatarsNFT:function(t,e){return Object(c.a)(regeneratorRuntime.mark((function r(){var o,c,f,m,v,h,j,L,y;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o=t.state,c=t.commit,f=t.dispatch,m=e.sortBy,v=e.limit,h=e.offset,j=e.name,L=e.collection,y=e.userAvatarId,r.abrupt("return",l.a.getAvatarsNFT(m,v,h,j,L,y).then((function(t){var e=t.rows.map((function(t){return O(O({},t),{},{nft:!0})}));Object(d.a)(c,"assetOwnedList").success(e);var r=Object(d.a)(c,"assetOwnedListAll"),l=e.concat(o.assetOwnedListAll.data);r.success(Object(n.a)(new Map(l.map((function(t){return[t.assetId,t]}))).values())),Object(d.a)(c,"assetOwnedListLength").success(t.count),y&&v&&f("setOffsetMenu",t.offset)})).catch((function(){Object(d.a)(c,"assetOwnedList").success([]),Object(d.a)(c,"assetOwnedListLength").success(0)})));case 3:case"end":return r.stop()}}),r)})))()},saveAvatarBundles:Object(v.a)({prop:"currentBundleCreation",func:l.a.saveAvatarBundles}),updateStatusAvatarBundle:function(t,e){var r=t.state;return l.a.updateStatusAvatarBundle(r.currentBundleCreation.data.id,e)},updateAvatarBundles:Object(v.a)({prop:"currentBundleCreation",func:l.a.updateAvatarBundles}),resetAssetOwnedList:function(t){var e=t.commit;Object(d.a)(e,"assetOwnedList").success([])},setActiveAssetListLength:function(t,e){var r=t.commit;Object(d.a)(r,"activeAssetListLength").success(e)},setWEBGLIsAvailable:function(t){var e=t.commit;Object(d.a)(e,"WEBGLIsAvailable").success(window.avatar.WEBGL.isWebGLAvailable())},setActiveTypeMesh:function(t,e){var r=t.commit;Object(d.a)(r,"activeTypeMesh").success(e)},setActiveAssetList:function(t,e){var r=t.commit,n=e.activeAssetList,o=e.length;Object(d.a)(r,"activeAssetList").success(n),Object(d.a)(r,"activeAssetListLength").success(o)},setCanLeaveAvatarPage:function(t,e){var r=t.commit;Object(d.a)(r,"canLeaveAvatarPage").success(e)},setFirstLoad:function(t,e){var r=t.commit;Object(d.a)(r,"firstLoad").success(e)},setTabId:function(t,e){var r=t.commit;Object(d.a)(r,"tabId").success(e)},setMenuId:function(t,e){var r=t.commit;Object(d.a)(r,"menuId").success(e)},setOffsetMenu:function(t,e){var r=t.commit;Object(d.a)(r,"offsetMenu").success(e)},setShowSelectedAvatarPage:function(t,e){var r=t.commit;Object(d.a)(r,"showSelectedAvatarPage").success(e)},setMenuOpen:function(t,e){var r=t.commit;Object(d.a)(r,"menuOpen").success(e)},setSearchValue:function(t,e){var r=t.commit;Object(d.a)(r,"searchValue").success(e)},setFilterActive:function(t,e){var r=t.commit;Object(d.a)(r,"filterActive").success(e)},setFilterName:function(t,e){var r=t.commit;Object(d.a)(r,"filterName").success(e)},getCollectionsFromUser:function(t){var e=t.commit,r=t.dispatch;return new Promise((function(t,n){l.a.getCollectionsNFTFromUser().then((function(r){var n={0:{name:"All",image:"/img/23_Avatar/menu-all.svg",className:"menu-icon"}},o=[0],c=0;r.map((function(l){var m=f.a.getIconWithId({id:l.id});(n[l.id]={name:l.name,image:m},o.push(l.id),++c===r.length)&&(Object(d.a)(e,"activeCollectionsIds").success(o),Object(d.a)(e,"activeCollections").success(n),t())}))})).catch((function(){r("resetCollectionsFromUser"),n()}))}))},resetCollectionsFromUser:function(t){var e=t.commit;Object(d.a)(e,"activeCollectionsIds").success([0]),Object(d.a)(e,"activeCollections").success({0:{name:"All",image:"/img/23_Avatar/menu-all.svg",className:"menu-icon"}})},setCollectionActive:function(t,e){var r=t.commit,n=t.state;Object(d.a)(r,"collectionActive").success(O(O({},n.activeCollections.data[e]),{},{id:e}))},setAvatarSaved:function(t,e){var r=t.commit;Object(d.a)(r,"avatarSaved").success(e)},setNewAsset:function(t,e){var r=t.commit;Object(d.a)(r,"newAsset").success(e)},setIsCustomFilter:function(t,e){var r=t.commit;Object(d.a)(r,"isCustomFilter").success(e)},setShowNotSavePopUp:function(t,e){var r=t.commit;Object(d.a)(r,"showNotSavePopUp").success(e)},setShowExternalAvatarsPopUp:function(t,e){var r=t.commit;Object(d.a)(r,"showExternalAvatarsPopUp").success(e)},getIfWalletWhitelisted:function(t){var e=t.commit;return new Promise((function(t){l.a.getIfWalletWhitelisted().then((function(r){Object(d.a)(e,"isAddressIsWhitelisted").success(r),t()})).catch((function(){Object(d.a)(e,"isAddressIsWhitelisted").success(!1),t()}))}))},setShowBg:function(t,e){var r=t.commit;Object(d.a)(r,"showBg").success(e)}}},2163:function(t,e,r){"use strict";r.r(e),r.d(e,"mutations",(function(){return l})),r.d(e,"getters",(function(){return f})),r.d(e,"state",(function(){return m})),r.d(e,"actions",(function(){return v}));var n=r(1),o=r(5),c=r(792),d=r(1346),l=n.c,f=n.b,m=function(){return{create:{data:null,status:"success"},userBadges:{data:null,status:"success"},badges:{data:null,status:"success"},types:["Memorabilia S3","Collector"]}},v={badges:Object(o.a)({prop:"badges",func:d.a.getBadges}),userBadges:Object(o.a)({prop:"userBadges",func:c.a.getUserBadgesByUserId}),create:Object(o.a)({prop:"create",func:c.a.createUserBadge})}},2164:function(t,e,r){"use strict";r.r(e),r.d(e,"mutations",(function(){return j})),r.d(e,"getters",(function(){return L})),r.d(e,"state",(function(){return y})),r.d(e,"actions",(function(){return A}));r(32),r(24),r(22),r(15),r(25);var n=r(10),o=(r(12),r(0)),c=r(1),d=r(13),l=r(16),f=r(9),m=r(21),v=r(426);function h(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function O(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?h(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):h(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var j=c.c,L=c.b,y=function(){return{approveForward:{data:null,status:"success"},biconomyTx:{data:null,status:"success"}}},w=function(){var t=Object(o.a)(regeneratorRuntime.mark((function t(e,r,n,c,f,h,j){var L,y,w,A,P,S,I,x,C,k,B=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return y=B.length>7&&void 0!==B[7]?B[7]:null,w=B.length>8&&void 0!==B[8]?B[8]:null,A=B.length>9&&void 0!==B[9]?B[9]:2,P=B.length>10&&void 0!==B[10]?B[10]:{},S=function(){var t=Object(o.a)(regeneratorRuntime.mark((function t(){var o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(v.b)(e,r,n,c,f,h,j,y,w);case 3:o=t.sent,Object(m.a)(o,"pending",A),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),j&&j(t.t0),Object(d.d)({title:t.t0});case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}(),t.next=7,Object(v.a)(!0);case 7:return I=t.sent,t.next=10,Object(m.i)("SAND","current",!0,null==I?void 0:I.userAllowed);case 10:if(x=t.sent){t.next=13;break}throw new Error("Error loading SAND contract");case 13:return t.next=15,x.methods.allowance(c.from,null==y||null===(L=y.erc20Forwarder)||void 0===L?void 0:L.address).call();case 15:if(!(C=t.sent)||"0"===C){t.next=20;break}S(),t.next=22;break;case 20:return t.next=22,Object(l.d)(x,"approve",[null==y||null===(k=y.erc20Forwarder)||void 0===k?void 0:k.address,l.i],O({from:c.from},P),(function(t){return Object(m.a)(t,"success",A,S)}),(function(t){return Object(m.a)(t,"error",A,j)}));case 22:case"end":return t.stop()}}),t)})));return function(e,r,n,o,c,d,l){return t.apply(this,arguments)}}(),A={loadContractByLayer:function(t,e){return Object(m.i)(e.contractName,e.layer,!0,e.biconomy)},callBiconomyTx:function(t,e){return Object(o.a)(regeneratorRuntime.mark((function r(){var n,o,v,h,j,L,y,A,P,S,I,x,C,k,B,N,R,T,E,U,D,F,G,V,J,W,H,M,_,z,K,Y,$,Q;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n=t.commit,o=t.dispatch,v=t.rootGetters,h=t.store,j=t.rootState,L=e.contractName,y=e.method,A=e.params,P=e.sendParams,S=e.layer,I=void 0===S?2:S,x=e.callbackSuccess,C=void 0===x?null:x,k=e.callbackFailure,B=void 0===k?null:k,N=e.callbackError,R=void 0===N?null:N,T=e.callbackPending,E=void 0===T?null:T,U=e.forward,D=void 0!==U&&U,F=e.gasless,G=void 0!==F&&F,V=e.skipSwitch,J=void 0!==V&&V,W=Object(c.a)(n,"biconomyTx"),r.prev=3,R||(R=B),B||(B=R),H=Object(m.b)(v),J){r.next=12;break}return r.next=10,Object(l.m)();case 10:return r.next=12,Object(m.l)(I,H,(function(t){return Object(m.k)(h,t)}));case 12:return r.next=14,o("loadContractByLayer",{contractName:L,layer:"current",biconomy:G});case 14:if(M=r.sent){r.next=17;break}throw new Error("Error loading contract");case 17:if(P=O({from:H},P),_={},z=j.user.walletType,K="true"===localStorage.getItem("isHardware_".concat(H)),_.signatureType="bitski"===z||K?window.PERSONAL_SIGN:window.EIP712_SIGN,f.p&&(_.domainName="Powered by Biconomy"),G&&(P=O(O({},P),_)),Y=[M,y,A,P,function(t){return Object(m.a)(t,"success",I,C)},function(t){return Object(m.a)(t,"error",I,B)},R],!D&&!G){r.next=31;break}return r.next=28,Object(m.c)(I,G);case 28:if($=r.sent){r.next=31;break}throw new Error("Error loading Biconomy instance");case 31:return D&&!G&&Y.push($.forwardClient,$.web3,I,_),r.next=34,(D&&!G?w:l.d).apply(void 0,Y);case 34:(Q=r.sent)&&Object(m.a)(Q,"pending",I,E),W.success(Q),r.next=44;break;case 39:r.prev=39,r.t0=r.catch(3),R&&R(r.t0),W.error(Object(c.d)(r.t0)),Object(d.d)({title:r.t0});case 44:case"end":return r.stop()}}),r,null,[[3,39]])})))()},approveSandBiconomy:function(t,e){return Object(o.a)(regeneratorRuntime.mark((function r(){var n,o,c,f,h,O,j,L,y,w,A,P,S,I,x,C;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=t.dispatch,o=t.rootGetters,c=t.store,f=e.layer,h=void 0===f?2:f,O=e.checkAllowance,j=void 0===O||O,r.prev=2,w=Object(m.b)(o),r.next=6,Object(l.m)();case 6:return r.next=8,Object(m.l)(h,w,(function(t){return Object(m.k)(c,t)}));case 8:return r.next=10,Object(m.c)(h);case 10:if(A=r.sent){r.next=13;break}throw new Error("Error loading biconomy instance");case 13:return r.next=15,Object(v.a)(!0);case 15:return P=r.sent,r.next=18,n("loadContractByLayer",{contractName:"SAND",layer:"current",biconomy:null==P?void 0:P.userAllowed});case 18:if(S=r.sent){r.next=21;break}throw new Error("Error loading SAND contract");case 21:if(!j){r.next=27;break}return r.next=24,S.methods.allowance(w,null==A||null===(I=A.forwardClient)||void 0===I||null===(x=I.erc20Forwarder)||void 0===x?void 0:x.address).call();case 24:if(!(C=r.sent)||"0"===C){r.next=27;break}return r.abrupt("return");case 27:return r.next=29,n("callBiconomyTx",{contractName:"SAND",method:"approve",params:[null==A||null===(L=A.forwardClient)||void 0===L||null===(y=L.erc20Forwarder)||void 0===y?void 0:y.address,l.i],sendParams:{},layer:h,gasless:null==P?void 0:P.userAllowed,skipSwitch:!0});case 29:r.next=35;break;case 31:throw r.prev=31,r.t0=r.catch(2),Object(d.d)({title:r.t0}),r.t0;case 35:case"end":return r.stop()}}),r,null,[[2,31]])})))()}}},2165:function(t,e,r){"use strict";r.r(e),r.d(e,"state",(function(){return O})),r.d(e,"getters",(function(){return j})),r.d(e,"mutations",(function(){return L})),r.d(e,"actions",(function(){return y}));r(32),r(24),r(25),r(509),r(22),r(15),r(58),r(49),r(12);var n=r(0),o=r(10),c=r(227),d=r(65),l=r(56),f=r(5),m=r(1);function v(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function h(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?v(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):v(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var O=function(){return{posts:null,featuredPosts:null,latestPost:null,totalPosts:0,activePost:null,categories:null,currentCategory:null,isLoading:!0,articleIsLoading:!0,isLoadingCategory:!0,highlightPosts:[],highlightLoading:!0,twitchVideos:{data:[],status:"loading"},youtubeVideos:{data:[],status:"loading"}}},j=h(h({},m.b),{},{posts:function(t){return t.posts},featuredPosts:function(t){return t.featuredPosts},mainCategories:function(t){return null!==t.categories?t.categories:null},category:function(t){return t.currentCategory||""},isLoading:function(t){return t.isLoading},articleIsLoading:function(t){return t.articleIsLoading},totalPosts:function(t){return t.totalPosts},latestPost:function(t){return t.latestPost},activePost:function(t){return t.activePost},highlightPosts:function(t){return t.highlightPosts},isHighlightLoading:function(t){return t.highlightLoading},isLoadingCategory:function(t){return t.isLoadingCategory}}),L=h(h({},m.c),{},{setLoading:function(t,e){t.isLoading=e},isLoadingCategory:function(t,e){t.isLoadingCategory=e},setArticleIsLoading:function(t,e){t.articleIsLoading=e},setPosts:function(t,e){t.posts=e},setFeaturedPosts:function(t,e){t.featuredPosts=e},setLatestPost:function(t,e){t.latestPost=e},setTotalPosts:function(t,e){t.totalPosts=e},setCategories:function(t,e){t.categories=e},setActivePost:function(t,e){t.activePost=e},setCategory:function(t,e){t.currentCategory=e},setHighlight:function(t,e){t.highlightPosts=e},setHighlightLoading:function(t,e){t.highlightLoading=e}}),y={getTwitchVideos:Object(f.a)({prop:"twitchVideos",func:c.a.getTwitchVideos}),getYoutubeVideos:Object(f.a)({prop:"youtubeVideos",func:c.a.getYoutubeVideos}),loadPosts:function(t,e){return Object(n.a)(regeneratorRuntime.mark((function r(){var n,o,l,f,m,v,h,O,j;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=t.commit,o=t.rootState,l=e.count,f=e.start,m=e.category,v=e.lang,h=e.featured,O=void 0!==h&&h,v=d.d[v],j=o.user.currentUser,r.abrupt("return",c.a.getLatestPosts(l,f,m,v,O).then((function(t){w(j)||(t=t.filter((function(t){var e;return"Draft"!==(null==t||null===(e=t.category)||void 0===e?void 0:e.name)}))),O?n("setFeaturedPosts",t.slice(0,t.length)):(m?n("setPosts",t):(n("setLatestPost",t.slice(0,1)[0]),n("setPosts",t.slice(0,t.length))),n(m?"isLoadingCategory":"setLoading",!1))})).catch((function(){n("setLoading",!1),n("isLoadingCategory",!1),n("setPosts",[])})));case 5:case"end":return r.stop()}}),r)})))()},getPostsNb:function(t,e){return Object(n.a)(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=t.commit,r.abrupt("return",c.a.getPostsNb(e).then((function(t){n("setTotalPosts",t)})).catch((function(){n("setTotalPosts",0)})));case 2:case"end":return r.stop()}}),r)})))()},getPostWithid:function(t,e){var r=this;return Object(n.a)(regeneratorRuntime.mark((function n(){var o,l,f;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:o=t.commit,l=e.id,f=e.lang,o("setArticleIsLoading",!0),f=d.d[f],c.a.getArticleById(l,f).then((function(t){o("setActivePost",t),o("setArticleIsLoading",!1)})).catch((function(){return r.$router.push("/blog")}));case 5:case"end":return n.stop()}}),n)})))()},loadCategories:function(t){return Object(n.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.commit,e.abrupt("return",c.a.getCategories().then((function(t){r("setCategories",t)})).catch((function(){r("setCategories",[])})));case 2:case"end":return e.stop()}}),e)})))()},loadAll:function(t,e){var r=t.commit,n=t.dispatch,o=e.count,c=e.start,d=e.category,l=e.lang;return d?r("isLoadingCategory",!0):(r("setLoading",!0),r("isLoadingCategory",!1)),Promise.all([n("loadPosts",{count:o,start:c,category:d,lang:l}),n("loadCategories")])},search:function(t,e){var r=t.rootState,n=e.search,o=r.user.currentUser;return c.a.search(n).then((function(t){return w(o)||(t=t.filter((function(t){return"Draft"!==t.category.name}))),t})).catch((function(){return[]}))},related:function(t,e){var r=t.rootState,n=e.id,o=r.user.currentUser;return c.a.getRelated(n).then((function(t){return w(o)||(t=t.filter((function(t){return"Draft"!==t.category.name}))),t})).catch((function(){return[]}))},highlights:function(t){return Object(n.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=t.commit)("setHighlightLoading",!1),e.next=4,c.a.getHighlights().then((function(t){r("setHighlight",t),r("setHighlightLoading",!1)})).catch((function(){r("setHighlightLoading",!1)}));case 4:case"end":return e.stop()}}),e)})))()}};function w(t){return!!t&&(Object(l.c)(t.roleId)||Object(l.e)(t.roleId)||Object(l.g)(t.roleId)||Object(l.f)(t.roleId))}},2215:function(t,e,r){"use strict";r.r(e),r.d(e,"mutations",(function(){return O})),r.d(e,"getters",(function(){return j})),r.d(e,"state",(function(){return L})),r.d(e,"actions",(function(){return S}));r(32),r(24),r(22),r(15),r(25),r(46),r(50),r(49);var n=r(43),o=(r(166),r(12),r(0)),c=(r(68),r(58),r(122),r(10)),d=r(1),l=r(39),f=r(13),m=r(21);function v(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function h(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?v(Object(source),!0).forEach((function(e){Object(c.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):v(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var O=h(h({},d.c),{},{setState:function(t,e){t[e.field]=e.value}}),j=d.b,L=function(){return{items:{data:[],status:"loading"}}};function y(t,e){for(var i=0;i<t.length;i++)if(t[i].id===e.id)return i;return!1}function w(t,e){var r=t.commit,n=t.state,o=t.rootGetters,c=Array.from(n.items.data),l=c.find((function(i){return i.id==e.id})),f=o["user/getUser"],m=null!==f?f.id:0;if(l){var v=c.indexOf(l);c.splice(v,1);var h=JSON.parse(localStorage.getItem("shoppingCart"));return h.map((function(t){t.userId===m&&(t.items=c)})),localStorage.setItem("shoppingCart",JSON.stringify(h)),Object(d.a)(r,"items").success(c),!0}return!1}function A(t){return P.apply(this,arguments)}function P(){return(P=Object(o.a)(regeneratorRuntime.mark((function t(e){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(m.j)("AssetSignedAuction",2);case 2:r=t.sent,n=(null==r?void 0:r.address)===e.auction.contractAddress?2:1,e.layer=n;case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var S={init:function(t){return Object(o.a)(regeneratorRuntime.mark((function e(){var r,c,l,f,m,v,h,i,O;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.rootGetters,c=t.commit;try{if(l=r["user/getUser"],f=null!==l?l.id:0,(m=JSON.parse(localStorage.getItem("shoppingCart")))&&0!==f&&(v=m.findIndex((function(t){return 0===t.userId})))>=0&&(h=Object(n.a)(m[v].items)).length>0){if(m.splice(v,1),(v=m.findIndex((function(t){return t.userId===f})))>=0&&m[v].items.length>0)for(i=0;i<h.length;i++)y(m[v].items,h[i])||m[v].items.push(h[i]);else m.push({items:h,userId:f});localStorage.setItem("shoppingCart",JSON.stringify(m)),Object(d.a)(c,"items").success(O)}O=[],m&&m.find((function(t){if(t.userId===f)return(O=Object(n.a)(t.items))&&O.find(function(){var t=Object(o.a)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.hasOwnProperty("layer")){t.next=3;break}return t.next=3,A(e);case 3:return t.abrupt("return",!0);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),!0})),Object(d.a)(c,"items").success(O)}catch(t){console.error(t),Object(d.a)(c,"items").success([])}case 2:case"end":return e.stop()}}),e)})))()},addItem:function(t,e){return Object(o.a)(regeneratorRuntime.mark((function r(){var n,o,c,m,v,h,O,j,L,y;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n=t.commit,o=t.state,c=t.rootGetters,m=Array.from(o.items.data),v=c["user/getUser"],h=null!==v?v.id:0,O=m.find((function(i){return i.id==e.id}))){r.next=18;break}return(O=e).amount=1,j=O.id,L=O.previewHash,m.push(O),r.next=13,A(O);case 13:(y=JSON.parse(localStorage.getItem("shoppingCart")))?y.find((function(t){return t.userId===h}))?y.map((function(t){t.userId===h&&(t.items=m)})):y.push({items:m,userId:h}):(y=[]).push({items:m,userId:h}),localStorage.setItem("shoppingCart",JSON.stringify(y)),Object(d.a)(n,"items").success(m),Object(f.b)({type:"added",image:"".concat(Object(l.a)(!1),"/assets/public/").concat(j,"/preview?").concat(L),title:O.name,messageKey:"shop.cart.added",duration:2e3,btnText:"shop.cart.goToCart",to:"/cart"});case 18:case"end":return r.stop()}}),r)})))()},removeItem:function(t,e){var r=t.commit,n=t.state,o=t.rootGetters,c=Array.from(n.items.data).find((function(i){return i.id==e.id}));if(w({commit:r,state:n,rootGetters:o},e)){var d=c.id,m=c.previewHash,v="/shop";this.$router.currentRoute.path.includes(v)&&(v=""),Object(f.b)({type:"removed",image:"".concat(Object(l.a)(!1),"/assets/public/").concat(d,"/preview?").concat(m),title:c.name,messageKey:"shop.cart.removed",duration:2e3,btnText:"shop.cart.emptyButtonText",to:v})}},updateItem:function(t,e){var r=t.commit,n=t.state,o=t.rootGetters,c=Array.from(n.items.data),l=c.find((function(i){return i.id==e.id})),f=o["user/getUser"],m=null!==f?f.id:0,v=JSON.parse(localStorage.getItem("shoppingCart"));if(l){var h=c.indexOf(l);c.splice(h,1,e),v.map((function(t){if(t.userId===m)t.items=c;else if(e.updateAuction){var r=y(t.items,e);r>=0&&t.items[r]&&(t.items[r].auction=e.auction)}})),localStorage.setItem("shoppingCart",JSON.stringify(v)),Object(d.a)(r,"items").success(c)}else e.updateAuction&&(v&&v.map((function(t){var r=y(t.items,e);r>=0&&t.items[r]&&(t.items[r].auction=e.auction)})),localStorage.setItem("shoppingCart",JSON.stringify(v)))},selectItem:function(t,e){var r=t.commit,n=t.state,o=t.rootGetters,c=Array.from(n.items.data),l=c.find((function(i){return i.id==e.id})),f=o["user/getUser"],m=null!==f?f.id:0,v=JSON.parse(localStorage.getItem("shoppingCart"));if(l){var h=c.indexOf(l);c.splice(h,1,e),v.map((function(t){if(t.userId===m)t.items=c;else if(e.updateAuction){var r=y(t.items,e);r>=0&&t.items[r]&&(t.items[r].auction=e.auction)}})),localStorage.setItem("shoppingCart",JSON.stringify(v)),Object(d.a)(r,"items").success(c)}else e.updateAuction&&(v&&v.map((function(t){var r=y(t.items,e);r>=0&&t.items[r]&&(t.items[r].auction=e.auction)})),localStorage.setItem("shoppingCart",JSON.stringify(v)))},cleanItem:function(t,e){w({commit:t.commit,state:t.state,rootGetters:t.rootGetters},e)}}}}]);