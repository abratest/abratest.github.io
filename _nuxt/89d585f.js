(window.webpackJsonp=window.webpackJsonp||[]).push([[119],{1060:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serializeError=t.isValidCode=t.getMessageFromCode=t.JSON_RPC_SERVER_ERROR_MESSAGE=void 0;const n=r(720),o=r(719),c=n.errorCodes.rpc.internal,l={code:c,message:d(c)};function d(code,e="Unspecified error message. This is a bug, please report it."){if(Number.isInteger(code)){const e=code.toString();if(_(n.errorValues,e))return n.errorValues[e].message;if(m(code))return t.JSON_RPC_SERVER_ERROR_MESSAGE}return e}function h(code){if(!Number.isInteger(code))return!1;const e=code.toString();return!!n.errorValues[e]||!!m(code)}function m(code){return code>=-32099&&code<=-32e3}function f(e){return e&&"object"==typeof e&&!Array.isArray(e)?Object.assign({},e):e}function _(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.JSON_RPC_SERVER_ERROR_MESSAGE="Unspecified server error.",t.getMessageFromCode=d,t.isValidCode=h,t.serializeError=function(e,{fallbackError:t=l,shouldIncludeStack:r=!1}={}){var n,c;if(!t||!Number.isInteger(t.code)||"string"!=typeof t.message)throw new Error("Must provide fallback error with integer number code and string message.");if(e instanceof o.EthereumRpcError)return e.serialize();const m={};if(e&&"object"==typeof e&&!Array.isArray(e)&&_(e,"code")&&h(e.code)){const t=e;m.code=t.code,t.message&&"string"==typeof t.message?(m.message=t.message,_(t,"data")&&(m.data=t.data)):(m.message=d(m.code),m.data={originalError:f(e)})}else{m.code=t.code;const r=null===(n=e)||void 0===n?void 0:n.message;m.message=r&&"string"==typeof r?r:t.message,m.data={originalError:f(e)}}const v=null===(c=e)||void 0===c?void 0:c.stack;return r&&e&&v&&"string"==typeof v&&(m.stack=v),m}},1668:function(e,t){var r=function(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw new Error("Unable to resolve global `this`")};e.exports=function(){if(this)return this;if("object"==typeof globalThis&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(e){return r()}try{return __global__||r()}finally{delete Object.prototype.__global__}}()},2002:function(e,t,r){r(1041),r(1040);const n=r(2004),o=(e,t)=>e+t,c=["sync","latest"];function l(e){return Number.parseInt(e,16)}e.exports=class extends n{constructor(e={}){super(),this._blockResetDuration=e.blockResetDuration||2e4,this._blockResetTimeout,this._currentBlock=null,this._isRunning=!1,this._onNewListener=this._onNewListener.bind(this),this._onRemoveListener=this._onRemoveListener.bind(this),this._resetCurrentBlock=this._resetCurrentBlock.bind(this),this._setupInternalEvents()}isRunning(){return this._isRunning}getCurrentBlock(){return this._currentBlock}async getLatestBlock(){if(this._currentBlock)return this._currentBlock;return await new Promise(e=>this.once("latest",e))}removeAllListeners(e){e?super.removeAllListeners(e):super.removeAllListeners(),this._setupInternalEvents(),this._onRemoveListener()}_start(){}_end(){}_setupInternalEvents(){this.removeListener("newListener",this._onNewListener),this.removeListener("removeListener",this._onRemoveListener),this.on("newListener",this._onNewListener),this.on("removeListener",this._onRemoveListener)}_onNewListener(e,t){c.includes(e)&&this._maybeStart()}_onRemoveListener(e,t){this._getBlockTrackerEventCount()>0||this._maybeEnd()}_maybeStart(){this._isRunning||(this._isRunning=!0,this._cancelBlockResetTimeout(),this._start())}_maybeEnd(){this._isRunning&&(this._isRunning=!1,this._setupBlockResetTimeout(),this._end())}_getBlockTrackerEventCount(){return c.map(e=>this.listenerCount(e)).reduce(o)}_newPotentialLatest(e){const t=this._currentBlock;t&&l(e)<=l(t)||this._setCurrentBlock(e)}_setCurrentBlock(e){const t=this._currentBlock;this._currentBlock=e,this.emit("latest",e),this.emit("sync",{oldBlock:t,newBlock:e})}_setupBlockResetTimeout(){this._cancelBlockResetTimeout(),this._blockResetTimeout=setTimeout(this._resetCurrentBlock,this._blockResetDuration),this._blockResetTimeout.unref&&this._blockResetTimeout.unref()}_cancelBlockResetTimeout(){clearTimeout(this._blockResetTimeout)}_resetCurrentBlock(){this._currentBlock=null}}},2047:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getMessageFromCode=t.serializeError=t.EthereumProviderError=t.EthereumRpcError=t.ethErrors=t.errorCodes=void 0;const n=r(719);Object.defineProperty(t,"EthereumRpcError",{enumerable:!0,get:function(){return n.EthereumRpcError}}),Object.defineProperty(t,"EthereumProviderError",{enumerable:!0,get:function(){return n.EthereumProviderError}});const o=r(1060);Object.defineProperty(t,"serializeError",{enumerable:!0,get:function(){return o.serializeError}}),Object.defineProperty(t,"getMessageFromCode",{enumerable:!0,get:function(){return o.getMessageFromCode}});const c=r(2048);Object.defineProperty(t,"ethErrors",{enumerable:!0,get:function(){return c.ethErrors}});const l=r(720);Object.defineProperty(t,"errorCodes",{enumerable:!0,get:function(){return l.errorCodes}})},2048:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ethErrors=void 0;const n=r(719),o=r(1060),c=r(720);function l(code,e){const[t,data]=h(e);return new n.EthereumRpcError(code,t||o.getMessageFromCode(code),data)}function d(code,e){const[t,data]=h(e);return new n.EthereumProviderError(code,t||o.getMessageFromCode(code),data)}function h(e){if(e){if("string"==typeof e)return[e];if("object"==typeof e&&!Array.isArray(e)){const{message:t,data:data}=e;if(t&&"string"!=typeof t)throw new Error("Must specify string message.");return[t||void 0,data]}}return[]}t.ethErrors={rpc:{parse:e=>l(c.errorCodes.rpc.parse,e),invalidRequest:e=>l(c.errorCodes.rpc.invalidRequest,e),invalidParams:e=>l(c.errorCodes.rpc.invalidParams,e),methodNotFound:e=>l(c.errorCodes.rpc.methodNotFound,e),internal:e=>l(c.errorCodes.rpc.internal,e),server:e=>{if(!e||"object"!=typeof e||Array.isArray(e))throw new Error("Ethereum RPC Server errors must provide single object argument.");const{code:code}=e;if(!Number.isInteger(code)||code>-32005||code<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return l(code,e)},invalidInput:e=>l(c.errorCodes.rpc.invalidInput,e),resourceNotFound:e=>l(c.errorCodes.rpc.resourceNotFound,e),resourceUnavailable:e=>l(c.errorCodes.rpc.resourceUnavailable,e),transactionRejected:e=>l(c.errorCodes.rpc.transactionRejected,e),methodNotSupported:e=>l(c.errorCodes.rpc.methodNotSupported,e),limitExceeded:e=>l(c.errorCodes.rpc.limitExceeded,e)},provider:{userRejectedRequest:e=>d(c.errorCodes.provider.userRejectedRequest,e),unauthorized:e=>d(c.errorCodes.provider.unauthorized,e),unsupportedMethod:e=>d(c.errorCodes.provider.unsupportedMethod,e),disconnected:e=>d(c.errorCodes.provider.disconnected,e),chainDisconnected:e=>d(c.errorCodes.provider.chainDisconnected,e),custom:e=>{if(!e||"object"!=typeof e||Array.isArray(e))throw new Error("Ethereum Provider custom errors must provide single object argument.");const{code:code,message:t,data:data}=e;if(!t||"string"!=typeof t)throw new Error('"message" must be a nonempty string');return new n.EthereumProviderError(code,t,data)}}}},2051:function(e,t,r){const n=r(1041),o=r(2052),c=r(2053),{bnToHex:l,hexToInt:d,incrementHexInt:h,minBlockRef:m,blockRefIsNumber:f}=r(465);e.exports=class extends c{constructor({provider:e,params:t}){super(),this.type="log",this.ethQuery=new n(e),this.params=Object.assign({fromBlock:"latest",toBlock:"latest",address:void 0,topics:[]},t),this.params.address&&(Array.isArray(this.params.address)||(this.params.address=[this.params.address]),this.params.address=this.params.address.map(address=>address.toLowerCase()))}async initialize({currentBlock:e}){let t=this.params.fromBlock;["latest","pending"].includes(t)&&(t=e),"earliest"===t&&(t="0x0"),this.params.fromBlock=t;const r=m(this.params.toBlock,e),n=Object.assign({},this.params,{toBlock:r}),o=await this._fetchLogs(n);this.addInitialResults(o)}async update({oldBlock:e,newBlock:t}){const r=t;let n;n=e?h(e):t;const o=Object.assign({},this.params,{fromBlock:n,toBlock:r}),c=(await this._fetchLogs(o)).filter(e=>this.matchLog(e));this.addResults(c)}async _fetchLogs(e){return await o(t=>this.ethQuery.getLogs(e,t))()}matchLog(e){if(d(this.params.fromBlock)>=d(e.blockNumber))return!1;if(f(this.params.toBlock)&&d(this.params.toBlock)<=d(e.blockNumber))return!1;const t=e.address&&e.address.toLowerCase();if(this.params.address&&t&&!this.params.address.includes(t))return!1;return this.params.topics.every((t,r)=>{let n=e.topics[r];if(!n)return!1;n=n.toLowerCase();let o=Array.isArray(t)?t:[t];if(o.includes(null))return!0;o=o.map(e=>e.toLowerCase());return o.includes(n)})}}},2053:function(e,t,r){const n=r(721);e.exports=class extends n{constructor(){super(),this.allResults=[]}async update(){throw new Error("BaseFilterWithHistory - no update method specified")}addResults(e){this.allResults=this.allResults.concat(e),super.addResults(e)}addInitialResults(e){this.allResults=this.allResults.concat(e),super.addInitialResults(e)}getAllResults(){return this.allResults}}},2054:function(e,t,r){const n=r(721),o=r(722),{incrementHexInt:c}=r(465);e.exports=class extends n{constructor({provider:e,params:t}){super(),this.type="block",this.provider=e}async update({oldBlock:e,newBlock:t}){const r=t,n=c(e),l=(await o({provider:this.provider,fromBlock:n,toBlock:r})).map(e=>e.hash);this.addResults(l)}}},465:function(e,t){function r(e){return e.sort((e,t)=>"latest"===e||"earliest"===t?1:"latest"===t||"earliest"===e?-1:n(e)-n(t))}function n(e){return null==e?e:Number.parseInt(e,16)}function o(e){if(null==e)return e;let t=e.toString(16);return t.length%2&&(t="0"+t),"0x"+t}function c(){return Math.floor(16*Math.random()).toString(16)}e.exports={minBlockRef:function(...e){return r(e)[0]},maxBlockRef:function(...e){const t=r(e);return t[t.length-1]},sortBlockRefs:r,bnToHex:function(e){return"0x"+e.toString(16)},blockRefIsNumber:function(e){return e&&!["earliest","latest","pending"].includes(e)},hexToInt:n,incrementHexInt:function(e){if(null==e)return e;return o(n(e)+1)},intToHex:o,unsafeRandomBytes:function(e){let t="0x";for(let i=0;i<e;i++)t+=c(),t+=c();return t}}},535:function(e,t,r){(function(e){var n=r(490).keccak_256,o=r(1738);function c(e){return e?o.toUnicode(e,{useStd3ASCII:!0,transitional:!1}):e}t.hash=function(t){for(var r="",i=0;i<32;i++)r+="00";if(name=c(t),name){var o=name.split(".");for(i=o.length-1;i>=0;i--){var l=n(o[i]);r=n(new e(r+l,"hex"))}}return"0x"+r},t.normalize=c}).call(this,r(6).Buffer)},601:function(e,t,r){const n=r(1040),o=r(2002);function c(e,t){return new Promise(r=>{const n=setTimeout(r,e);n.unref&&t&&n.unref()})}e.exports=class extends o{constructor(e={}){if(!e.provider)throw new Error("PollingBlockTracker - no provider specified.");const t=e.pollingInterval||2e4,r=e.retryTimeout||t/10,n=void 0===e.keepEventLoopActive||e.keepEventLoopActive,o=e.setSkipCacheFlag||!1;super(Object.assign({blockResetDuration:t},e)),this._provider=e.provider,this._pollingInterval=t,this._retryTimeout=r,this._keepEventLoopActive=n,this._setSkipCacheFlag=o}async checkForLatestBlock(){return await this._updateLatestBlock(),await this.getLatestBlock()}_start(){this._performSync().catch(e=>this.emit("error",e))}async _performSync(){for(;this._isRunning;)try{await this._updateLatestBlock(),await c(this._pollingInterval,!this._keepEventLoopActive)}catch(e){const t=new Error("PollingBlockTracker - encountered an error while attempting to update latest block:\n"+e.stack);try{this.emit("error",t)}catch(e){console.error(t)}await c(this._retryTimeout,!this._keepEventLoopActive)}}async _updateLatestBlock(){const e=await this._fetchLatestBlock();this._newPotentialLatest(e)}async _fetchLatestBlock(){const e={jsonrpc:"2.0",id:1,method:"eth_blockNumber",params:[]};this._setSkipCacheFlag&&(e.skipCache=!0);const t=await n(t=>this._provider.sendAsync(e,t))();if(t.error)throw new Error("PollingBlockTracker - encountered error fetching block:\n"+t.error);return t.result}}},602:function(e,t,r){const n=r(2884).Mutex,{createAsyncMiddleware:o}=r(1056),c=r(1061),l=r(2051),d=r(2054),h=r(2055),{intToHex:m,hexToInt:f}=r(465);function _(e){return v(async(...t)=>{const filter=await e(...t);return m(filter.id)})}function v(e){return o(async(t,r)=>{const n=await e.apply(null,t.params);r.result=n})}function w(e,t){const r=[];for(let t in e)r.push(e[t]);return r}e.exports=function({blockTracker:e,provider:t}){let r=0,o={};const k=new n,y=function({mutex:e}){return t=>async(r,n,o,c)=>{(await e.acquire())(),t(r,n,o,c)}}({mutex:k}),E=c({eth_newFilter:y(_(C)),eth_newBlockFilter:y(_(B)),eth_newPendingTransactionFilter:y(_(P)),eth_uninstallFilter:y(v(I)),eth_getFilterChanges:y(v(L)),eth_getFilterLogs:y(v(x))}),R=async({oldBlock:e,newBlock:t})=>{if(0===o.length)return;const r=await k.acquire();try{await Promise.all(w(o).map(async filter=>{try{await filter.update({oldBlock:e,newBlock:t})}catch(e){console.error(e)}}))}catch(e){console.error(e)}r()};return E.newLogFilter=C,E.newBlockFilter=B,E.newPendingTransactionFilter=P,E.uninstallFilter=I,E.getFilterChanges=L,E.getFilterLogs=x,E.destroy=()=>{!async function(){const e=w(o).length;o={},S({prevFilterCount:e,newFilterCount:0})}()},E;async function C(e){const filter=new l({provider:t,params:e});await N(filter);return filter}async function B(){const filter=new d({provider:t});await N(filter);return filter}async function P(){const filter=new h({provider:t});await N(filter);return filter}async function L(e){const t=f(e),filter=o[t];if(!filter)throw new Error(`No filter for index "${t}"`);return filter.getChangesAndClear()}async function x(e){const t=f(e),filter=o[t];if(!filter)throw new Error(`No filter for index "${t}"`);return"log"===filter.type?results=filter.getAllResults():results=[],results}async function I(e){const t=f(e),filter=o[t],r=Boolean(filter);return r&&await async function(e){const t=w(o).length;delete o[e];const r=w(o).length;S({prevFilterCount:t,newFilterCount:r})}(t),r}async function N(filter){const t=w(o).length,n=await e.getLatestBlock();await filter.initialize({currentBlock:n}),r++,o[r]=filter,filter.id=r,filter.idHex=m(r);return S({prevFilterCount:t,newFilterCount:w(o).length}),r}function S({prevFilterCount:t,newFilterCount:r}){0===t&&r>0?e.on("sync",R):t>0&&0===r&&e.removeListener("sync",R)}}},719:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EthereumProviderError=t.EthereumRpcError=void 0;const n=r(1059);class o extends Error{constructor(code,e,data){if(!Number.isInteger(code))throw new Error('"code" must be an integer.');if(!e||"string"!=typeof e)throw new Error('"message" must be a nonempty string.');super(e),this.code=code,void 0!==data&&(this.data=data)}serialize(){const e={code:this.code,message:this.message};return void 0!==this.data&&(e.data=this.data),this.stack&&(e.stack=this.stack),e}toString(){return n.default(this.serialize(),c,2)}}t.EthereumRpcError=o;function c(e,t){if("[Circular]"!==t)return t}t.EthereumProviderError=class extends o{constructor(code,e,data){if(!function(code){return Number.isInteger(code)&&code>=1e3&&code<=4999}(code))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');super(code,e,data)}}},720:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.errorValues=t.errorCodes=void 0,t.errorCodes={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901}},t.errorValues={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}}},721:function(e,t,r){const n=r(547).default;e.exports=class extends n{constructor(){super(),this.updates=[]}async initialize(){}async update(){throw new Error("BaseFilter - no update method specified")}addResults(e){this.updates=this.updates.concat(e),e.forEach(e=>this.emit("update",e))}addInitialResults(e){}getChangesAndClear(){const e=this.updates;return this.updates=[],e}}},722:function(e,t){function r(e){return null==e?e:Number.parseInt(e,16)}function n(e){if(null==e)return e;return"0x"+e.toString(16)}e.exports=async function({provider:e,fromBlock:t,toBlock:o}){t||(t=o);const c=r(t),l=r(o),d=Array(l-c+1).fill().map((e,t)=>c+t).map(n);return await Promise.all(d.map(t=>function(e,t,r){return new Promise((n,o)=>{e.sendAsync({id:1,jsonrpc:"2.0",method:t,params:r},(e,t)=>{if(e)return o(e);n(t.result)})})}(e,"eth_getBlockByNumber",[t,!1])))}}}]);